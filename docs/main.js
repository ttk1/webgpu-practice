(()=>{"use strict";const e=1e3;const n=1e3;const t=5e4;const r=4194304;const o={basic_render_pipeline:()=>{return e=void 0,n=void 0,r=function*(){console.log("hello, world!");const e=document.body.appendChild(document.createElement("canvas"));e.width=500,e.height=500;const n=e.getContext("webgpu"),t=yield navigator.gpu.requestAdapter(),r=yield t.requestDevice(),o=r.createShaderModule({code:"\nstruct VertexOut {\n  @builtin(position) position : vec4f,\n  @location(0) color : vec4f\n}\n\n@vertex\nfn vertex_main(@location(0) position: vec4f,\n               @location(1) color: vec4f) -> VertexOut\n{\n  var output : VertexOut;\n  output.position = position;\n  output.color = color;\n  return output;\n}\n\n@fragment\nfn fragment_main(fragData: VertexOut) -> @location(0) vec4f\n{\n  return fragData.color;\n}\n"});n.configure({device:r,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"});const a=new Float32Array([0,.6,0,1,1,0,0,1,-.5,-.6,0,1,0,1,0,1,.5,-.6,0,1,0,0,1,1]),u=r.createBuffer({size:a.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});r.queue.writeBuffer(u,0,a,0,a.length);const i={vertex:{module:o,entryPoint:"vertex_main",buffers:[{attributes:[{shaderLocation:0,offset:0,format:"float32x4"},{shaderLocation:1,offset:16,format:"float32x4"}],arrayStride:32,stepMode:"vertex"}]},fragment:{module:o,entryPoint:"fragment_main",targets:[{format:navigator.gpu.getPreferredCanvasFormat()}]},primitive:{topology:"triangle-list"},layout:"auto"},c=r.createRenderPipeline(i),s=r.createCommandEncoder(),l={colorAttachments:[{clearValue:{r:0,g:.5,b:1,a:1},loadOp:"clear",storeOp:"store",view:n.getCurrentTexture().createView()}]},f=s.beginRenderPass(l);f.setPipeline(c),f.setVertexBuffer(0,u),f.draw(3),f.end(),r.queue.submit([s.finish()])},new((t=void 0)||(t=Promise))((function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,i)}c((r=r.apply(e,n||[])).next())}));var e,n,t,r},basic_compute_pipeline:()=>{return n=void 0,t=void 0,o=function*(){console.log("hello, world!");const n=yield navigator.gpu.requestAdapter(),t=yield n.requestDevice(),r=t.createShaderModule({code:"\n@group(0) @binding(0)\nvar<storage, read_write> output: array<f32>;\n\n@compute @workgroup_size(64)\nfn main(\n  @builtin(global_invocation_id)\n  global_id : vec3u,\n\n  @builtin(local_invocation_id)\n  local_id : vec3u,\n) {\n  // Avoid accessing the buffer out of bounds\n  if (global_id.x >= 1000) {\n    return;\n  }\n\n  output[global_id.x] =\n    f32(global_id.x) * 1000. + f32(local_id.x);\n}\n"}),o=t.createBuffer({size:e,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),a=t.createBuffer({size:e,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),u=t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),i=t.createBindGroup({layout:u,entries:[{binding:0,resource:{buffer:o}}]}),c=t.createComputePipeline({layout:t.createPipelineLayout({bindGroupLayouts:[u]}),compute:{module:r,entryPoint:"main"}}),s=t.createCommandEncoder(),l=s.beginComputePass();l.setPipeline(c),l.setBindGroup(0,i),l.dispatchWorkgroups(Math.ceil(15.625)),l.end(),s.copyBufferToBuffer(o,0,a,0,e),t.queue.submit([s.finish()]),yield a.mapAsync(GPUMapMode.READ,0,e);const f=a.getMappedRange(0,e).slice(0);a.unmap(),console.log(new Float32Array(f))},new((r=void 0)||(r=Promise))((function(e,a){function u(e){try{c(o.next(e))}catch(e){a(e)}}function i(e){try{c(o.throw(e))}catch(e){a(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,i)}c((o=o.apply(n,t||[])).next())}));var n,t,r,o},demo01:()=>{return e=void 0,n=void 0,r=function*(){console.log("hello, world!");const e=document.body.appendChild(document.createElement("canvas"));e.width=500,e.height=500;const n=e.getContext("webgpu"),t=yield navigator.gpu.requestAdapter(),r=yield t.requestDevice(),o=r.createShaderModule({code:"\nstruct VertexOut {\n  @builtin(position) position : vec4f,\n  @location(0) color : vec4f\n}\n\n@vertex\nfn vertex_main(@location(0) position: vec4f,\n               @location(1) color: vec4f) -> VertexOut\n{\n  var output : VertexOut;\n  output.position = vec4(position.xyz * 0.5, position.w);\n  output.color = color;\n  return output;\n}\n\n@fragment\nfn fragment_main(fragData: VertexOut) -> @location(0) vec4f\n{\n  return fragData.color;\n}\n"});n.configure({device:r,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"});const a=new Float32Array([0,1,0,1,1,-1,0,1,-1,-1,0,1]),u=r.createBuffer({size:a.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});r.queue.writeBuffer(u,0,a,0,a.length);const i=new Float32Array([1,0,0,1,0,1,0,1,0,0,1,1]),c=r.createBuffer({size:i.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});r.queue.writeBuffer(c,0,i,0,i.length);const s={vertex:{module:o,entryPoint:"vertex_main",buffers:[{attributes:[{shaderLocation:0,offset:0,format:"float32x4"}],arrayStride:16,stepMode:"vertex"},{attributes:[{shaderLocation:1,offset:0,format:"float32x4"}],arrayStride:16,stepMode:"vertex"}]},fragment:{module:o,entryPoint:"fragment_main",targets:[{format:navigator.gpu.getPreferredCanvasFormat()}]},primitive:{topology:"triangle-list"},layout:"auto"},l=r.createRenderPipeline(s),f=r.createCommandEncoder(),d={colorAttachments:[{clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store",view:n.getCurrentTexture().createView()}]},p=f.beginRenderPass(d);p.setPipeline(l),p.setVertexBuffer(0,u),p.setVertexBuffer(1,c),p.draw(3),p.end(),r.queue.submit([f.finish()])},new((t=void 0)||(t=Promise))((function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,i)}c((r=r.apply(e,n||[])).next())}));var e,n,t,r},demo02:()=>{return e=void 0,t=void 0,o=function*(){console.log("hello, world!");const e=yield navigator.gpu.requestAdapter(),t=yield e.requestDevice(),r=t.createBuffer({size:n,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),o=t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),a=t.createBindGroup({layout:o,entries:[{binding:0,resource:{buffer:r}}]}),u=t.createShaderModule({code:"\n@group(0) @binding(0)\nvar<storage, read_write> output: array<f32>;\n\n// バッファを初期化\n@compute @workgroup_size(64)\nfn init(@builtin(global_invocation_id) global_id : vec3u) {\n  output[global_id.x] = f32(global_id.x) * 1000.;\n}\n\n// バッファの値を1インクリメント\n@compute @workgroup_size(64)\nfn increment(@builtin(global_invocation_id) global_id : vec3u) {\n  output[global_id.x] += 1.;\n}\n"}),i=t.createCommandEncoder(),c=t.createComputePipeline({layout:t.createPipelineLayout({bindGroupLayouts:[o]}),compute:{module:u,entryPoint:"init"}}),s=i.beginComputePass();s.setPipeline(c),s.setBindGroup(0,a),s.dispatchWorkgroups(Math.ceil(15.625)),s.end();for(let e=0;e<10;e++){const e=t.createComputePipeline({layout:t.createPipelineLayout({bindGroupLayouts:[o]}),compute:{module:u,entryPoint:"increment"}}),n=i.beginComputePass();n.setPipeline(e),n.setBindGroup(0,a),n.dispatchWorkgroups(Math.ceil(15.625)),n.end()}const l=t.createBuffer({size:n,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST});i.copyBufferToBuffer(r,0,l,0,n),t.queue.submit([i.finish()]),yield l.mapAsync(GPUMapMode.READ,0,n);const f=l.getMappedRange(0,n).slice(0);l.unmap(),console.log(new Float32Array(f))},new((r=void 0)||(r=Promise))((function(n,a){function u(e){try{c(o.next(e))}catch(e){a(e)}}function i(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,i)}c((o=o.apply(e,t||[])).next())}));var e,t,r,o},demo03:()=>{return e=void 0,n=void 0,o=function*(){console.log("hello, world!");const e=document.body.appendChild(document.createElement("canvas"));e.width=500,e.height=500;const n=e.getContext("webgpu"),r=yield navigator.gpu.requestAdapter(),o=yield r.requestDevice(),a=o.createShaderModule({code:"\nstruct VertexOut {\n  @builtin(position) position : vec4f,\n  @location(0) color : vec4f\n}\n\n@vertex\nfn vertex_main(@location(0) position: vec2f,\n               @location(1) velocity: vec2f) -> VertexOut\n{\n  var output : VertexOut;\n  output.position = vec4f(position, 0., 1.);\n  output.color = vec4f(1., 0., 0., 1.);\n  return output;\n}\n\n@fragment\nfn fragment_main(fragData: VertexOut) -> @location(0) vec4f\n{\n  return fragData.color;\n}\n\nstruct Particle {\n  position : vec2f,\n  velocity : vec2f,\n}\n\n@binding(0) @group(0)\nvar<storage, read_write> particles: array<Particle>;\n\n@compute @workgroup_size(64)\nfn update(@builtin(global_invocation_id) global_id : vec3u) {\n  let g = vec2f(0., 0.);\n  let idx = global_id.x;\n  let p = particles[idx].position;\n  let v = particles[idx].velocity;\n\n  particles[idx].position = p + v * .2;\n  particles[idx].velocity = v\n    // 重力加速度\n    + ((g - p) / pow(distance(g, p) + 1., 2.)) * .05\n    // 空気抵抗\n    - v * pow(length(v), 2.) * .05;\n}\n"});n.configure({device:o,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"});const u=[];for(let e=0;e<t;e++)u.push(2*(Math.random()-.5)),u.push(2*(Math.random()-.5)),u.push(0),u.push(0);const i=o.createBuffer({size:Float32Array.BYTES_PER_ELEMENT*t*4,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST|GPUBufferUsage.STORAGE});o.queue.writeBuffer(i,0,new Float32Array(u),0,t);const c={vertex:{module:a,entryPoint:"vertex_main",buffers:[{attributes:[{shaderLocation:0,offset:0,format:"float32x2"},{shaderLocation:1,offset:8,format:"float32x2"}],arrayStride:16,stepMode:"vertex"}]},fragment:{module:a,entryPoint:"fragment_main",targets:[{format:navigator.gpu.getPreferredCanvasFormat()}]},primitive:{topology:"point-list"},layout:"auto"},s=o.createRenderPipeline(c),l={colorAttachments:[{clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store",view:null}]},f=o.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),d=o.createBindGroup({layout:f,entries:[{binding:0,resource:{buffer:i}}]}),p=o.createComputePipeline({layout:o.createPipelineLayout({bindGroupLayouts:[f]}),compute:{module:a,entryPoint:"update"}}),g=()=>{const e=o.createCommandEncoder();l.colorAttachments[0].view=n.getCurrentTexture().createView();const r=e.beginRenderPass(l);r.setPipeline(s),r.setVertexBuffer(0,i),r.draw(t),r.end();const a=e.beginComputePass();a.setPipeline(p),a.setBindGroup(0,d),a.dispatchWorkgroups(Math.ceil(781.25)),a.end(),o.queue.submit([e.finish()]),requestAnimationFrame(g)};g()},new((r=void 0)||(r=Promise))((function(t,a){function u(e){try{c(o.next(e))}catch(e){a(e)}}function i(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(u,i)}c((o=o.apply(e,n||[])).next())}));var e,n,r,o},demo04:()=>{return e=void 0,n=void 0,r=function*(){const e=yield navigator.gpu.requestAdapter(),n=yield e.requestDevice(),t=n.createBuffer({size:16,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),r=n.createBuffer({size:16,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),o=n.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),a=n.createBindGroup({layout:o,entries:[{binding:0,resource:{buffer:t}}]}),u=n.createShaderModule({code:"\nfn F(X: u32, Y: u32, Z: u32) -> u32 {\n  return (X & Y) | (~X & Z);\n}\n\nfn G(X: u32, Y: u32, Z: u32) -> u32 {\n  return (X & Y) | (X & Z) | (Y & Z);\n}\n\nfn H(X: u32, Y: u32, Z: u32) -> u32 {\n  return X ^ Y ^ Z;\n}\n\nfn rotate(a: u32, s: u32) -> u32 {\n  return (a << s) | (a >> (32 - s));\n}\n\nfn FF(a: ptr<private,u32>, b: u32, c: u32, d: u32, x: u32, s: u32) {\n  *a = rotate(*a + F(b, c, d) + x, s);\n}\n\nfn GG(a: ptr<private,u32>, b: u32, c: u32, d: u32, x: u32, s: u32) {\n  *a = rotate(*a + G(b, c, d) + x + 0x5a827999u, s);\n}\n\nfn HH(a: ptr<private,u32>, b: u32, c: u32, d: u32, x: u32, s: u32) {\n  *a = rotate(*a + H(b, c, d) + x + 0x6ed9eba1u, s);\n}\n\nvar<private> A = 0x67452301u;\nvar<private> B = 0xefcdab89u;\nvar<private> C = 0x98badcfeu;\nvar<private> D = 0x10325476u;\n\nfn update(X: array<u32, 16>) {\n  let AA = A;\n  let BB = B;\n  let CC = C;\n  let DD = D;\n\n  FF(&A, B, C, D, X[0], 3);\n  FF(&D, A, B, C, X[1], 7);\n  FF(&C, D, A, B, X[2], 11);\n  FF(&B, C, D, A, X[3], 19);\n  FF(&A, B, C, D, X[4], 3);\n  FF(&D, A, B, C, X[5], 7);\n  FF(&C, D, A, B, X[6], 11);\n  FF(&B, C, D, A, X[7], 19);\n  FF(&A, B, C, D, X[8], 3);\n  FF(&D, A, B, C, X[9], 7);\n  FF(&C, D, A, B, X[10], 11);\n  FF(&B, C, D, A, X[11], 19);\n  FF(&A, B, C, D, X[12], 3);\n  FF(&D, A, B, C, X[13], 7);\n  FF(&C, D, A, B, X[14], 11);\n  FF(&B, C, D, A, X[15], 19);\n\n  GG(&A, B, C, D, X[0], 3);\n  GG(&D, A, B, C, X[4], 5);\n  GG(&C, D, A, B, X[8], 9);\n  GG(&B, C, D, A, X[12], 13);\n  GG(&A, B, C, D, X[1], 3);\n  GG(&D, A, B, C, X[5], 5);\n  GG(&C, D, A, B, X[9], 9);\n  GG(&B, C, D, A, X[13], 13);\n  GG(&A, B, C, D, X[2], 3);\n  GG(&D, A, B, C, X[6], 5);\n  GG(&C, D, A, B, X[10], 9);\n  GG(&B, C, D, A, X[14], 13);\n  GG(&A, B, C, D, X[3], 3);\n  GG(&D, A, B, C, X[7], 5);\n  GG(&C, D, A, B, X[11], 9);\n  GG(&B, C, D, A, X[15], 13);\n\n  HH(&A, B, C, D, X[0], 3);\n  HH(&D, A, B, C, X[8], 9);\n  HH(&C, D, A, B, X[4], 11);\n  HH(&B, C, D, A, X[12], 15);\n  HH(&A, B, C, D, X[2], 3);\n  HH(&D, A, B, C, X[10], 9);\n  HH(&C, D, A, B, X[6], 11);\n  HH(&B, C, D, A, X[14], 15);\n  HH(&A, B, C, D, X[1], 3);\n  HH(&D, A, B, C, X[9], 9);\n  HH(&C, D, A, B, X[5], 11);\n  HH(&B, C, D, A, X[13], 15);\n  HH(&A, B, C, D, X[3], 3);\n  HH(&D, A, B, C, X[11], 9);\n  HH(&C, D, A, B, X[7], 11);\n  HH(&B, C, D, A, X[15], 15);\n\n  A += AA;\n  B += BB;\n  C += CC;\n  D += DD;\n}\n\n@group(0) @binding(0)\nvar<storage, read_write> result: vec4u;\n\n@compute @workgroup_size(1)\nfn main() {\n  // 'baaa' の md4 を計算\n  update(array<u32, 16>(\n    0x61616162u, 0x80u, 0u, 0u,\n    0u, 0u, 0u, 0u,\n    0u, 0u, 0u, 0u,\n    0u, 0u, 32u, 0u));\n  result = vec4u(A, B, C, D);\n}\n"}),i=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[o]}),compute:{module:u,entryPoint:"main"}}),c=n.createCommandEncoder(),s=c.beginComputePass();s.setPipeline(i),s.setBindGroup(0,a),s.dispatchWorkgroups(1),s.end(),c.copyBufferToBuffer(t,0,r,0,16),n.queue.submit([c.finish()]),yield r.mapAsync(GPUMapMode.READ,0,16);const l=r.getMappedRange(0,16),f=new Uint8Array(l.slice(0));r.unmap();let d="";for(const e of f)d+=e.toString(16);console.log(d)},new((t=void 0)||(t=Promise))((function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,i)}c((r=r.apply(e,n||[])).next())}));var e,n,t,r},demo05:()=>{return e=void 0,n=void 0,o=function*(){const e=yield navigator.gpu.requestAdapter(),n=yield e.requestDevice(),t=n.createBuffer({size:r,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),o=n.createBuffer({size:r,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),a=performance.now(),u=n.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),i=n.createBindGroup({layout:u,entries:[{binding:0,resource:{buffer:t}}]}),c=n.createShaderModule({code:"\nfn F(X: u32, Y: u32, Z: u32) -> u32 {\n  return (X & Y) | (~X & Z);\n}\n\nfn G(X: u32, Y: u32, Z: u32) -> u32 {\n  return (X & Y) | (X & Z) | (Y & Z);\n}\n\nfn H(X: u32, Y: u32, Z: u32) -> u32 {\n  return X ^ Y ^ Z;\n}\n\nfn rotate(a: u32, s: u32) -> u32 {\n  return (a << s) | (a >> (32 - s));\n}\n\nfn FF(a: ptr<private,u32>, b: u32, c: u32, d: u32, x: u32, s: u32) {\n  *a = rotate(*a + F(b, c, d) + x, s);\n}\n\nfn GG(a: ptr<private,u32>, b: u32, c: u32, d: u32, x: u32, s: u32) {\n  *a = rotate(*a + G(b, c, d) + x + 0x5a827999u, s);\n}\n\nfn HH(a: ptr<private,u32>, b: u32, c: u32, d: u32, x: u32, s: u32) {\n  *a = rotate(*a + H(b, c, d) + x + 0x6ed9eba1u, s);\n}\n\nvar<private> A: u32;\nvar<private> B: u32;\nvar<private> C: u32;\nvar<private> D: u32;\n\nfn update(X: array<u32, 16>) {\n  let AA = A;\n  let BB = B;\n  let CC = C;\n  let DD = D;\n\n  FF(&A, B, C, D, X[0], 3);\n  FF(&D, A, B, C, X[1], 7);\n  FF(&C, D, A, B, X[2], 11);\n  FF(&B, C, D, A, X[3], 19);\n  FF(&A, B, C, D, X[4], 3);\n  FF(&D, A, B, C, X[5], 7);\n  FF(&C, D, A, B, X[6], 11);\n  FF(&B, C, D, A, X[7], 19);\n  FF(&A, B, C, D, X[8], 3);\n  FF(&D, A, B, C, X[9], 7);\n  FF(&C, D, A, B, X[10], 11);\n  FF(&B, C, D, A, X[11], 19);\n  FF(&A, B, C, D, X[12], 3);\n  FF(&D, A, B, C, X[13], 7);\n  FF(&C, D, A, B, X[14], 11);\n  FF(&B, C, D, A, X[15], 19);\n\n  GG(&A, B, C, D, X[0], 3);\n  GG(&D, A, B, C, X[4], 5);\n  GG(&C, D, A, B, X[8], 9);\n  GG(&B, C, D, A, X[12], 13);\n  GG(&A, B, C, D, X[1], 3);\n  GG(&D, A, B, C, X[5], 5);\n  GG(&C, D, A, B, X[9], 9);\n  GG(&B, C, D, A, X[13], 13);\n  GG(&A, B, C, D, X[2], 3);\n  GG(&D, A, B, C, X[6], 5);\n  GG(&C, D, A, B, X[10], 9);\n  GG(&B, C, D, A, X[14], 13);\n  GG(&A, B, C, D, X[3], 3);\n  GG(&D, A, B, C, X[7], 5);\n  GG(&C, D, A, B, X[11], 9);\n  GG(&B, C, D, A, X[15], 13);\n\n  HH(&A, B, C, D, X[0], 3);\n  HH(&D, A, B, C, X[8], 9);\n  HH(&C, D, A, B, X[4], 11);\n  HH(&B, C, D, A, X[12], 15);\n  HH(&A, B, C, D, X[2], 3);\n  HH(&D, A, B, C, X[10], 9);\n  HH(&C, D, A, B, X[6], 11);\n  HH(&B, C, D, A, X[14], 15);\n  HH(&A, B, C, D, X[1], 3);\n  HH(&D, A, B, C, X[9], 9);\n  HH(&C, D, A, B, X[5], 11);\n  HH(&B, C, D, A, X[13], 15);\n  HH(&A, B, C, D, X[3], 3);\n  HH(&D, A, B, C, X[11], 9);\n  HH(&C, D, A, B, X[7], 11);\n  HH(&B, C, D, A, X[15], 15);\n\n  A += AA;\n  B += BB;\n  C += CC;\n  D += DD;\n}\n\n@group(0) @binding(0)\nvar<storage, read_write> result: array<u32>;\n\n@compute @workgroup_size(1 << 6)\nfn main(@builtin(global_invocation_id) global_id : vec3u) {\n  for (var i = 0u; i < 1 << (32 - 14 - 6); i++) {\n    A = 0x67452301u;\n    B = 0xefcdab89u;\n    C = 0x98badcfeu;\n    D = 0x10325476u;\n\n    let word = (global_id.x << (32 - 14 - 6)) | i;\n    update(array<u32, 16>(\n      word, 0x80u, 0u, 0u,\n      0u, 0u, 0u, 0u,\n      0u, 0u, 0u, 0u,\n      0u, 0u, 32u, 0u));\n    if (A == 0x00000000u) {\n      result[global_id.x] = word;\n      //break;\n    }\n    //result[global_id.x] = select(result[global_id.x], word, A == 0x00000000u);\n  }\n}\n"}),s=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[u]}),compute:{module:c,entryPoint:"main"}}),l=n.createCommandEncoder(),f=l.beginComputePass();f.setPipeline(s),f.setBindGroup(0,i),f.dispatchWorkgroups(16384),f.end(),l.copyBufferToBuffer(t,0,o,0,r),n.queue.submit([l.finish()]),yield o.mapAsync(GPUMapMode.READ,0,r);const d=o.getMappedRange(0,r),p=new Uint32Array(d.slice(0));o.unmap(),p.forEach((e=>{0!=e&&console.log(e)}));const g=performance.now();console.log(`duration: ${Math.round(g-a)} ms`),console.log(`hash rate: ${Math.round(1e3*Math.pow(2,32)/(g-a)/Math.pow(1024,3))} GH/s`)},new((t=void 0)||(t=Promise))((function(r,a){function u(e){try{c(o.next(e))}catch(e){a(e)}}function i(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,i)}c((o=o.apply(e,n||[])).next())}));var e,n,t,o}};function a(){const e=document.body.appendChild(document.createElement("ul"));for(const n in o){const t=e.appendChild(document.createElement("li")).appendChild(document.createElement("a"));t.href="./index.html?page="+n,t.textContent=n}}window.onload=()=>{return e=void 0,n=void 0,r=function*(){(o[new URL(window.location.href).searchParams.get("page")]||a)()},new((t=void 0)||(t=Promise))((function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,i)}c((r=r.apply(e,n||[])).next())}));var e,n,t,r}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUFjK0IsUUFDZG1CLEVBQU9VLFNBQVFQLElBQ0osR0FBTEEsR0FDRnJJLFFBQVFDLElBQUlvSSxFLElBS2hCLE1BQU01RCxFQUFNZ0UsWUFBWUMsTUFDeEIxSSxRQUFRQyxJQUFJLGFBQWFxRyxLQUFLdUMsTUFBTXBFLEVBQU0rRCxTQUMxQ3hJLFFBQVFDLElBQUksY0FBY3FHLEtBQUt1QyxNQUFpQixJQUFWLFdBQUssS0FBYXBFLEVBQU0rRCxHQUFXLGNBQVEsV0FDbkYsRSxZQTFGMkIsSyw2UUEwRjFCLEdDakZELFNBQVNNLElBQ1AsTUFBTUMsRUFBSzVJLFNBQVNDLEtBQUtDLFlBQVlGLFNBQVNHLGNBQWMsT0FDNUQsSUFBSyxNQUFNMEksS0FBUWxKLEVBQU8sQ0FDeEIsTUFBTWdFLEVBQUlpRixFQUFHMUksWUFBWUYsU0FBU0csY0FBYyxPQUFPRCxZQUFZRixTQUFTRyxjQUFjLE1BQzFGd0QsRUFBRW1GLEtBQU8scUJBQXVCRCxFQUNoQ2xGLEVBQUVvRixZQUFjRixDLENBRXBCLENBRUFHLE9BQU9DLE9BQVMsS0FBWSxPLE9BQUEsRSxPQUFBLEUsRUFBQSxhQUN6QnRKLEVBQU0sSUFBSXVKLElBQUlGLE9BQU9HLFNBQVNMLE1BQU1NLGFBQWFDLElBQUksVUFBWVYsSUFDcEUsRSxZQUY0QixLLDZRQUUzQixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHR0azEvd2ViZ3B1LXByYWN0aWNlLy4vc3JjL2Jhc2ljX3JlbmRlcl9waXBlbGluZS9tYWluLnRzIiwid2VicGFjazovL0B0dGsxL3dlYmdwdS1wcmFjdGljZS8uL3NyYy9iYXNpY19jb21wdXRlX3BpcGVsaW5lL3NoYWRlci53Z3NsLnRzIiwid2VicGFjazovL0B0dGsxL3dlYmdwdS1wcmFjdGljZS8uL3NyYy9kZW1vMDIvbWFpbi50cyIsIndlYnBhY2s6Ly9AdHRrMS93ZWJncHUtcHJhY3RpY2UvLi9zcmMvZGVtbzAzL21haW4udHMiLCJ3ZWJwYWNrOi8vQHR0azEvd2ViZ3B1LXByYWN0aWNlLy4vc3JjL2RlbW8wNS9tYWluLnRzIiwid2VicGFjazovL0B0dGsxL3dlYmdwdS1wcmFjdGljZS8uL3NyYy9tYWluLnRzIiwid2VicGFjazovL0B0dGsxL3dlYmdwdS1wcmFjdGljZS8uL3NyYy9iYXNpY19yZW5kZXJfcGlwZWxpbmUvc2hhZGVyLndnc2wudHMiLCJ3ZWJwYWNrOi8vQHR0azEvd2ViZ3B1LXByYWN0aWNlLy4vc3JjL2Jhc2ljX2NvbXB1dGVfcGlwZWxpbmUvbWFpbi50cyIsIndlYnBhY2s6Ly9AdHRrMS93ZWJncHUtcHJhY3RpY2UvLi9zcmMvZGVtbzAxL21haW4udHMiLCJ3ZWJwYWNrOi8vQHR0azEvd2ViZ3B1LXByYWN0aWNlLy4vc3JjL2RlbW8wMS9zaGFkZXIud2dzbC50cyIsIndlYnBhY2s6Ly9AdHRrMS93ZWJncHUtcHJhY3RpY2UvLi9zcmMvZGVtbzAyL3NoYWRlci53Z3NsLnRzIiwid2VicGFjazovL0B0dGsxL3dlYmdwdS1wcmFjdGljZS8uL3NyYy9kZW1vMDMvc2hhZGVyLndnc2wudHMiLCJ3ZWJwYWNrOi8vQHR0azEvd2ViZ3B1LXByYWN0aWNlLy4vc3JjL2RlbW8wNC9tYWluLnRzIiwid2VicGFjazovL0B0dGsxL3dlYmdwdS1wcmFjdGljZS8uL3NyYy9kZW1vMDQvc2hhZGVyLndnc2wudHMiLCJ3ZWJwYWNrOi8vQHR0azEvd2ViZ3B1LXByYWN0aWNlLy4vc3JjL2RlbW8wNS9zaGFkZXIud2dzbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2hhZGVyIGZyb20gJy4vc2hhZGVyLndnc2wnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdoZWxsbywgd29ybGQhJyk7XG5cbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYkdQVV9BUEkjYmFzaWNfcmVuZGVyX3BpcGVsaW5lXG5cbiAgY29uc3QgY3ZzID0gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSk7XG4gIGN2cy53aWR0aCA9IDUwMDtcbiAgY3ZzLmhlaWdodCA9IDUwMDtcblxuICBjb25zdCBjdHggPSBjdnMuZ2V0Q29udGV4dCgnd2ViZ3B1Jyk7XG5cbiAgY29uc3QgYWRhcHRlciA9IGF3YWl0IG5hdmlnYXRvci5ncHUucmVxdWVzdEFkYXB0ZXIoKTtcbiAgY29uc3QgZGV2aWNlID0gYXdhaXQgYWRhcHRlci5yZXF1ZXN0RGV2aWNlKCk7XG5cbiAgY29uc3Qgc2hhZGVyTW9kdWxlID0gZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZSh7XG4gICAgY29kZTogc2hhZGVyLFxuICB9KTtcblxuICBjdHguY29uZmlndXJlKHtcbiAgICBkZXZpY2U6IGRldmljZSxcbiAgICBmb3JtYXQ6IG5hdmlnYXRvci5ncHUuZ2V0UHJlZmVycmVkQ2FudmFzRm9ybWF0KCksXG4gICAgYWxwaGFNb2RlOiAncHJlbXVsdGlwbGllZCcsXG4gIH0pO1xuXG4gIGNvbnN0IHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgMC4wLCAwLjYsIDAsIDEsIDEsIDAsIDAsIDEsIC0wLjUsIC0wLjYsIDAsIDEsIDAsIDEsIDAsIDEsIDAuNSwgLTAuNiwgMCwgMSwgMCxcbiAgICAwLCAxLCAxLFxuICBdKTtcblxuICBjb25zdCB2ZXJ0ZXhCdWZmZXIgPSBkZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICBzaXplOiB2ZXJ0aWNlcy5ieXRlTGVuZ3RoLCAvLyBtYWtlIGl0IGJpZyBlbm91Z2ggdG8gc3RvcmUgdmVydGljZXMgaW5cbiAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gIH0pO1xuXG4gIGRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcih2ZXJ0ZXhCdWZmZXIsIDAsIHZlcnRpY2VzLCAwLCB2ZXJ0aWNlcy5sZW5ndGgpO1xuXG4gIGNvbnN0IHZlcnRleEJ1ZmZlcnM6IEdQVVZlcnRleEJ1ZmZlckxheW91dFtdID0gW1xuICAgIHtcbiAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAwLCAvLyBwb3NpdGlvblxuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICBmb3JtYXQ6ICdmbG9hdDMyeDQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc2hhZGVyTG9jYXRpb246IDEsIC8vIGNvbG9yXG4gICAgICAgICAgb2Zmc2V0OiAxNixcbiAgICAgICAgICBmb3JtYXQ6ICdmbG9hdDMyeDQnLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGFycmF5U3RyaWRlOiAzMixcbiAgICAgIHN0ZXBNb2RlOiAndmVydGV4JyxcbiAgICB9LFxuICBdO1xuXG4gIGNvbnN0IHBpcGVsaW5lRGVzY3JpcHRvcjogR1BVUmVuZGVyUGlwZWxpbmVEZXNjcmlwdG9yID0ge1xuICAgIHZlcnRleDoge1xuICAgICAgbW9kdWxlOiBzaGFkZXJNb2R1bGUsXG4gICAgICBlbnRyeVBvaW50OiAndmVydGV4X21haW4nLFxuICAgICAgYnVmZmVyczogdmVydGV4QnVmZmVycyxcbiAgICB9LFxuICAgIGZyYWdtZW50OiB7XG4gICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgIGVudHJ5UG9pbnQ6ICdmcmFnbWVudF9tYWluJyxcbiAgICAgIHRhcmdldHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGZvcm1hdDogbmF2aWdhdG9yLmdwdS5nZXRQcmVmZXJyZWRDYW52YXNGb3JtYXQoKSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICBwcmltaXRpdmU6IHtcbiAgICAgIHRvcG9sb2d5OiAndHJpYW5nbGUtbGlzdCcsXG4gICAgfSxcbiAgICBsYXlvdXQ6ICdhdXRvJyxcbiAgfTtcblxuICBjb25zdCByZW5kZXJQaXBlbGluZSA9IGRldmljZS5jcmVhdGVSZW5kZXJQaXBlbGluZShwaXBlbGluZURlc2NyaXB0b3IpO1xuXG4gIGNvbnN0IGNvbW1hbmRFbmNvZGVyID0gZGV2aWNlLmNyZWF0ZUNvbW1hbmRFbmNvZGVyKCk7XG5cbiAgY29uc3QgY2xlYXJDb2xvciA9IHsgcjogMC4wLCBnOiAwLjUsIGI6IDEuMCwgYTogMS4wIH07XG5cbiAgY29uc3QgcmVuZGVyUGFzc0Rlc2NyaXB0b3I6IEdQVVJlbmRlclBhc3NEZXNjcmlwdG9yID0ge1xuICAgIGNvbG9yQXR0YWNobWVudHM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xlYXJWYWx1ZTogY2xlYXJDb2xvcixcbiAgICAgICAgbG9hZE9wOiAnY2xlYXInLFxuICAgICAgICBzdG9yZU9wOiAnc3RvcmUnLFxuICAgICAgICB2aWV3OiBjdHguZ2V0Q3VycmVudFRleHR1cmUoKS5jcmVhdGVWaWV3KCksXG4gICAgICB9LFxuICAgIF0sXG4gIH07XG5cbiAgY29uc3QgcGFzc0VuY29kZXIgPSBjb21tYW5kRW5jb2Rlci5iZWdpblJlbmRlclBhc3MocmVuZGVyUGFzc0Rlc2NyaXB0b3IpO1xuXG4gIHBhc3NFbmNvZGVyLnNldFBpcGVsaW5lKHJlbmRlclBpcGVsaW5lKTtcbiAgcGFzc0VuY29kZXIuc2V0VmVydGV4QnVmZmVyKDAsIHZlcnRleEJ1ZmZlcik7XG4gIHBhc3NFbmNvZGVyLmRyYXcoMyk7XG5cbiAgcGFzc0VuY29kZXIuZW5kKCk7XG5cbiAgZGV2aWNlLnF1ZXVlLnN1Ym1pdChbY29tbWFuZEVuY29kZXIuZmluaXNoKCldKTtcbn07XG4iLCJleHBvcnQgY29uc3QgQlVGRkVSX1NJWkUgPSAxMDAwO1xuXG5leHBvcnQgZGVmYXVsdCBgXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMClcbnZhcjxzdG9yYWdlLCByZWFkX3dyaXRlPiBvdXRwdXQ6IGFycmF5PGYzMj47XG5cbkBjb21wdXRlIEB3b3JrZ3JvdXBfc2l6ZSg2NClcbmZuIG1haW4oXG4gIEBidWlsdGluKGdsb2JhbF9pbnZvY2F0aW9uX2lkKVxuICBnbG9iYWxfaWQgOiB2ZWMzdSxcblxuICBAYnVpbHRpbihsb2NhbF9pbnZvY2F0aW9uX2lkKVxuICBsb2NhbF9pZCA6IHZlYzN1LFxuKSB7XG4gIC8vIEF2b2lkIGFjY2Vzc2luZyB0aGUgYnVmZmVyIG91dCBvZiBib3VuZHNcbiAgaWYgKGdsb2JhbF9pZC54ID49ICR7QlVGRkVSX1NJWkV9KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgb3V0cHV0W2dsb2JhbF9pZC54XSA9XG4gICAgZjMyKGdsb2JhbF9pZC54KSAqIDEwMDAuICsgZjMyKGxvY2FsX2lkLngpO1xufVxuYDtcbiIsImltcG9ydCBzaGFkZXIgZnJvbSAnLi9zaGFkZXIud2dzbCc7XG5cbmNvbnN0IEJVRkZFUl9TSVpFID0gMTAwMDtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnaGVsbG8sIHdvcmxkIScpO1xuXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJHUFVfQVBJI2Jhc2ljX2NvbXB1dGVfcGlwZWxpbmVcblxuICBjb25zdCBhZGFwdGVyID0gYXdhaXQgbmF2aWdhdG9yLmdwdS5yZXF1ZXN0QWRhcHRlcigpO1xuICBjb25zdCBkZXZpY2UgPSBhd2FpdCBhZGFwdGVyLnJlcXVlc3REZXZpY2UoKTtcbiAgY29uc3Qgb3V0cHV0ID0gZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgc2l6ZTogQlVGRkVSX1NJWkUsXG4gICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX1NSQyxcbiAgfSk7XG5cbiAgY29uc3QgYmluZEdyb3VwTGF5b3V0ID0gZGV2aWNlLmNyZWF0ZUJpbmRHcm91cExheW91dCh7XG4gICAgZW50cmllczogW1xuICAgICAge1xuICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5DT01QVVRFLFxuICAgICAgICBidWZmZXI6IHtcbiAgICAgICAgICB0eXBlOiAnc3RvcmFnZScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIGNvbnN0IGJpbmRHcm91cCA9IGRldmljZS5jcmVhdGVCaW5kR3JvdXAoe1xuICAgIGxheW91dDogYmluZEdyb3VwTGF5b3V0LFxuICAgIGVudHJpZXM6IFtcbiAgICAgIHtcbiAgICAgICAgYmluZGluZzogMCxcbiAgICAgICAgcmVzb3VyY2U6IHtcbiAgICAgICAgICBidWZmZXI6IG91dHB1dCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgY29uc3Qgc2hhZGVyTW9kdWxlID0gZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZSh7XG4gICAgY29kZTogc2hhZGVyLFxuICB9KTtcblxuICBjb25zdCBjb21tYW5kRW5jb2RlciA9IGRldmljZS5jcmVhdGVDb21tYW5kRW5jb2RlcigpO1xuXG5cbiAgLy8g44OQ44OD44OV44Kh44Gu5Yid5pyf5YyWXG5cbiAgY29uc3QgY29tcHV0ZVBpcGVsaW5lID0gZGV2aWNlLmNyZWF0ZUNvbXB1dGVQaXBlbGluZSh7XG4gICAgbGF5b3V0OiBkZXZpY2UuY3JlYXRlUGlwZWxpbmVMYXlvdXQoe1xuICAgICAgYmluZEdyb3VwTGF5b3V0czogW2JpbmRHcm91cExheW91dF0sXG4gICAgfSksXG4gICAgY29tcHV0ZToge1xuICAgICAgbW9kdWxlOiBzaGFkZXJNb2R1bGUsXG4gICAgICBlbnRyeVBvaW50OiAnaW5pdCcsXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgY29tcHV0ZVBhc3MgPSBjb21tYW5kRW5jb2Rlci5iZWdpbkNvbXB1dGVQYXNzKCk7XG4gIGNvbXB1dGVQYXNzLnNldFBpcGVsaW5lKGNvbXB1dGVQaXBlbGluZSk7XG4gIGNvbXB1dGVQYXNzLnNldEJpbmRHcm91cCgwLCBiaW5kR3JvdXApO1xuICBjb21wdXRlUGFzcy5kaXNwYXRjaFdvcmtncm91cHMoTWF0aC5jZWlsKEJVRkZFUl9TSVpFIC8gNjQpKTtcbiAgY29tcHV0ZVBhc3MuZW5kKCk7XG5cblxuICAvLyDlgKTjga7jgqTjg7Pjgq/jg6rjg6Hjg7Pjg4jlh6bnkIbjgpLlrp/ooYxcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICBjb25zdCBjb21wdXRlUGlwZWxpbmUgPSBkZXZpY2UuY3JlYXRlQ29tcHV0ZVBpcGVsaW5lKHtcbiAgICAgIGxheW91dDogZGV2aWNlLmNyZWF0ZVBpcGVsaW5lTGF5b3V0KHtcbiAgICAgICAgYmluZEdyb3VwTGF5b3V0czogW2JpbmRHcm91cExheW91dF0sXG4gICAgICB9KSxcbiAgICAgIGNvbXB1dGU6IHtcbiAgICAgICAgbW9kdWxlOiBzaGFkZXJNb2R1bGUsXG4gICAgICAgIGVudHJ5UG9pbnQ6ICdpbmNyZW1lbnQnLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbXB1dGVQYXNzID0gY29tbWFuZEVuY29kZXIuYmVnaW5Db21wdXRlUGFzcygpO1xuICAgIGNvbXB1dGVQYXNzLnNldFBpcGVsaW5lKGNvbXB1dGVQaXBlbGluZSk7XG4gICAgY29tcHV0ZVBhc3Muc2V0QmluZEdyb3VwKDAsIGJpbmRHcm91cCk7XG4gICAgY29tcHV0ZVBhc3MuZGlzcGF0Y2hXb3JrZ3JvdXBzKE1hdGguY2VpbChCVUZGRVJfU0laRSAvIDY0KSk7XG4gICAgY29tcHV0ZVBhc3MuZW5kKCk7XG4gIH1cblxuXG4gIC8vIOe1kOaenOOBruWPluOCiuWHuuOBl1xuXG4gIGNvbnN0IHN0YWdpbmdCdWZmZXIgPSBkZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICBzaXplOiBCVUZGRVJfU0laRSxcbiAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuTUFQX1JFQUQgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgfSk7XG5cbiAgLy8gQ29weSBvdXRwdXQgYnVmZmVyIHRvIHN0YWdpbmcgYnVmZmVyXG4gIGNvbW1hbmRFbmNvZGVyLmNvcHlCdWZmZXJUb0J1ZmZlcihcbiAgICBvdXRwdXQsXG4gICAgMCwgLy8gU291cmNlIG9mZnNldFxuICAgIHN0YWdpbmdCdWZmZXIsXG4gICAgMCwgLy8gRGVzdGluYXRpb24gb2Zmc2V0XG4gICAgQlVGRkVSX1NJWkVcbiAgKTtcblxuICAvLyBFbmQgZnJhbWUgYnkgcGFzc2luZyBhcnJheSBvZiBjb21tYW5kIGJ1ZmZlcnMgdG8gY29tbWFuZCBxdWV1ZSBmb3IgZXhlY3V0aW9uXG4gIGRldmljZS5xdWV1ZS5zdWJtaXQoW2NvbW1hbmRFbmNvZGVyLmZpbmlzaCgpXSk7XG5cbiAgLy8gbWFwIHN0YWdpbmcgYnVmZmVyIHRvIHJlYWQgcmVzdWx0cyBiYWNrIHRvIEpTXG4gIGF3YWl0IHN0YWdpbmdCdWZmZXIubWFwQXN5bmMoXG4gICAgR1BVTWFwTW9kZS5SRUFELFxuICAgIDAsIC8vIE9mZnNldFxuICAgIEJVRkZFUl9TSVpFIC8vIExlbmd0aFxuICApO1xuXG4gIGNvbnN0IGNvcHlBcnJheUJ1ZmZlciA9IHN0YWdpbmdCdWZmZXIuZ2V0TWFwcGVkUmFuZ2UoMCwgQlVGRkVSX1NJWkUpO1xuICBjb25zdCBkYXRhID0gY29weUFycmF5QnVmZmVyLnNsaWNlKDApO1xuICBzdGFnaW5nQnVmZmVyLnVubWFwKCk7XG4gIGNvbnNvbGUubG9nKG5ldyBGbG9hdDMyQXJyYXkoZGF0YSkpO1xufTtcbiIsImltcG9ydCBzaGFkZXIgZnJvbSAnLi9zaGFkZXIud2dzbCc7XG4vKipcbiAqIFBhcnRpY2xlXG4gKi9cbmNvbnN0IE5VTV9QQVJUSUNMRVMgPSA1MF8wMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jICgpID0+IHtcbiAgY29uc29sZS5sb2coJ2hlbGxvLCB3b3JsZCEnKTtcblxuICBjb25zdCBjdnMgPSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpKTtcbiAgY3ZzLndpZHRoID0gNTAwO1xuICBjdnMuaGVpZ2h0ID0gNTAwO1xuXG4gIGNvbnN0IGN0eCA9IGN2cy5nZXRDb250ZXh0KCd3ZWJncHUnKTtcblxuICBjb25zdCBhZGFwdGVyID0gYXdhaXQgbmF2aWdhdG9yLmdwdS5yZXF1ZXN0QWRhcHRlcigpO1xuICBjb25zdCBkZXZpY2UgPSBhd2FpdCBhZGFwdGVyLnJlcXVlc3REZXZpY2UoKTtcbiAgY29uc3Qgc2hhZGVyTW9kdWxlID0gZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZSh7XG4gICAgY29kZTogc2hhZGVyLFxuICB9KTtcblxuICBjdHguY29uZmlndXJlKHtcbiAgICBkZXZpY2U6IGRldmljZSxcbiAgICBmb3JtYXQ6IG5hdmlnYXRvci5ncHUuZ2V0UHJlZmVycmVkQ2FudmFzRm9ybWF0KCksXG4gICAgYWxwaGFNb2RlOiAncHJlbXVsdGlwbGllZCcsXG4gIH0pO1xuXG5cbiAgLy8g44OQ44OD44OV44Kh44Gu5Yid5pyf5YyWXG5cbiAgY29uc3QgcGFydGljbGVzOiBudW1iZXJbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IE5VTV9QQVJUSUNMRVM7IGkrKykge1xuICAgIC8vIHBvc2l0aW9uXG4gICAgcGFydGljbGVzLnB1c2goKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMik7XG4gICAgcGFydGljbGVzLnB1c2goKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMik7XG4gICAgLy8gdmVsb2NpdHlcbiAgICBwYXJ0aWNsZXMucHVzaCgwLjApO1xuICAgIHBhcnRpY2xlcy5wdXNoKDAuMCk7XG4gIH1cblxuICBjb25zdCBwYXJ0aWNsZUJ1ZmZlciA9IGRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgIHNpemU6IEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCAqIE5VTV9QQVJUSUNMRVMgKiA0LFxuICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5WRVJURVggfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCB8IEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UsXG4gIH0pO1xuICBkZXZpY2UucXVldWUud3JpdGVCdWZmZXIocGFydGljbGVCdWZmZXIsIDAsIG5ldyBGbG9hdDMyQXJyYXkocGFydGljbGVzKSwgMCwgTlVNX1BBUlRJQ0xFUyk7XG5cblxuICAvLyByZW5kZXIgcGlwZWxpbmUg44Gu6Kit5a6aXG5cbiAgY29uc3QgcGFydGljbGVCdWZmZXJMYXlvdXQ6IEdQVVZlcnRleEJ1ZmZlckxheW91dFtdID0gW1xuICAgIHtcbiAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIC8vIHBvc2l0aW9uXG4gICAgICAgICAgc2hhZGVyTG9jYXRpb246IDAsXG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIGZvcm1hdDogJ2Zsb2F0MzJ4MicsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAvLyB2ZWxvY2l0eVxuICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAxLFxuICAgICAgICAgIG9mZnNldDogOCxcbiAgICAgICAgICBmb3JtYXQ6ICdmbG9hdDMyeDInLFxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgYXJyYXlTdHJpZGU6IDE2LFxuICAgICAgc3RlcE1vZGU6ICd2ZXJ0ZXgnLFxuICAgIH0sXG4gIF07XG5cbiAgY29uc3QgcGlwZWxpbmVEZXNjcmlwdG9yOiBHUFVSZW5kZXJQaXBlbGluZURlc2NyaXB0b3IgPSB7XG4gICAgdmVydGV4OiB7XG4gICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgIGVudHJ5UG9pbnQ6ICd2ZXJ0ZXhfbWFpbicsXG4gICAgICBidWZmZXJzOiBwYXJ0aWNsZUJ1ZmZlckxheW91dCxcbiAgICB9LFxuICAgIGZyYWdtZW50OiB7XG4gICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgIGVudHJ5UG9pbnQ6ICdmcmFnbWVudF9tYWluJyxcbiAgICAgIHRhcmdldHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGZvcm1hdDogbmF2aWdhdG9yLmdwdS5nZXRQcmVmZXJyZWRDYW52YXNGb3JtYXQoKSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICBwcmltaXRpdmU6IHtcbiAgICAgIHRvcG9sb2d5OiAncG9pbnQtbGlzdCcsXG4gICAgfSxcbiAgICBsYXlvdXQ6ICdhdXRvJyxcbiAgfTtcblxuICBjb25zdCByZW5kZXJQaXBlbGluZSA9IGRldmljZS5jcmVhdGVSZW5kZXJQaXBlbGluZShwaXBlbGluZURlc2NyaXB0b3IpO1xuICBjb25zdCBjbGVhckNvbG9yID0geyByOiAwLjAsIGc6IDAuMCwgYjogMC4wLCBhOiAxLjAgfTtcbiAgY29uc3QgcmVuZGVyUGFzc0Rlc2NyaXB0b3I6IEdQVVJlbmRlclBhc3NEZXNjcmlwdG9yID0ge1xuICAgIGNvbG9yQXR0YWNobWVudHM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xlYXJWYWx1ZTogY2xlYXJDb2xvcixcbiAgICAgICAgbG9hZE9wOiAnY2xlYXInLFxuICAgICAgICBzdG9yZU9wOiAnc3RvcmUnLFxuICAgICAgICB2aWV3OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICB9O1xuXG5cbiAgLy8gY29tcHV0ZSBwaXBlbGluZSDjga7oqK3lrppcblxuICBjb25zdCBiaW5kR3JvdXBMYXlvdXQgPSBkZXZpY2UuY3JlYXRlQmluZEdyb3VwTGF5b3V0KHtcbiAgICBlbnRyaWVzOiBbXG4gICAgICB7XG4gICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkNPTVBVVEUsXG4gICAgICAgIGJ1ZmZlcjoge1xuICAgICAgICAgIHR5cGU6ICdzdG9yYWdlJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgY29uc3QgYmluZEdyb3VwID0gZGV2aWNlLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgbGF5b3V0OiBiaW5kR3JvdXBMYXlvdXQsXG4gICAgZW50cmllczogW1xuICAgICAge1xuICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICByZXNvdXJjZToge1xuICAgICAgICAgIGJ1ZmZlcjogcGFydGljbGVCdWZmZXIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIGNvbnN0IGNvbXB1dGVQaXBlbGluZSA9IGRldmljZS5jcmVhdGVDb21wdXRlUGlwZWxpbmUoe1xuICAgIGxheW91dDogZGV2aWNlLmNyZWF0ZVBpcGVsaW5lTGF5b3V0KHtcbiAgICAgIGJpbmRHcm91cExheW91dHM6IFtiaW5kR3JvdXBMYXlvdXRdLFxuICAgIH0pLFxuICAgIGNvbXB1dGU6IHtcbiAgICAgIG1vZHVsZTogc2hhZGVyTW9kdWxlLFxuICAgICAgZW50cnlQb2ludDogJ3VwZGF0ZScsXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3Qgc3RlcCA9ICgpID0+IHtcbiAgICBjb25zdCBjb21tYW5kRW5jb2RlciA9IGRldmljZS5jcmVhdGVDb21tYW5kRW5jb2RlcigpO1xuXG4gICAgcmVuZGVyUGFzc0Rlc2NyaXB0b3IuY29sb3JBdHRhY2htZW50c1swXS52aWV3ID0gY3R4LmdldEN1cnJlbnRUZXh0dXJlKCkuY3JlYXRlVmlldygpO1xuXG4gICAgY29uc3QgcmVuZGVyUGFzcyA9IGNvbW1hbmRFbmNvZGVyLmJlZ2luUmVuZGVyUGFzcyhyZW5kZXJQYXNzRGVzY3JpcHRvcik7XG4gICAgcmVuZGVyUGFzcy5zZXRQaXBlbGluZShyZW5kZXJQaXBlbGluZSk7XG4gICAgcmVuZGVyUGFzcy5zZXRWZXJ0ZXhCdWZmZXIoMCwgcGFydGljbGVCdWZmZXIpO1xuICAgIHJlbmRlclBhc3MuZHJhdyhOVU1fUEFSVElDTEVTKTtcbiAgICByZW5kZXJQYXNzLmVuZCgpO1xuXG4gICAgY29uc3QgY29tcHV0ZVBhc3MgPSBjb21tYW5kRW5jb2Rlci5iZWdpbkNvbXB1dGVQYXNzKCk7XG4gICAgY29tcHV0ZVBhc3Muc2V0UGlwZWxpbmUoY29tcHV0ZVBpcGVsaW5lKTtcbiAgICBjb21wdXRlUGFzcy5zZXRCaW5kR3JvdXAoMCwgYmluZEdyb3VwKTtcbiAgICBjb21wdXRlUGFzcy5kaXNwYXRjaFdvcmtncm91cHMoTWF0aC5jZWlsKE5VTV9QQVJUSUNMRVMgLyA2NCkpO1xuICAgIGNvbXB1dGVQYXNzLmVuZCgpO1xuXG4gICAgZGV2aWNlLnF1ZXVlLnN1Ym1pdChbY29tbWFuZEVuY29kZXIuZmluaXNoKCldKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gIH07XG4gIHN0ZXAoKTtcbn07XG4iLCJpbXBvcnQgc2hhZGVyLCB7IFdPUktHUk9VUF9DT1VOVF9CSVRTLCBXT1JLR1JPVVBfU0laRV9CSVRTIH0gZnJvbSAnLi9zaGFkZXIud2dzbCc7XG4vKipcbiAqIE1ENCDkuKbliJflrp/ooYxcbiAqL1xuY29uc3QgV09SS0dST1VQX0NPVU5UID0gMSA8PCBXT1JLR1JPVVBfQ09VTlRfQklUUztcbmNvbnN0IFdPUktHUk9VUF9TSVpFID0gMSA8PCBXT1JLR1JPVVBfU0laRV9CSVRTO1xuLy8g57WQ5p6c44KS5L+d5a2Y44GZ44KL44OQ44OD44OV44Kh44Gu44K144Kk44K6XG5jb25zdCBCVUZGRVJfU0laRSA9IFdPUktHUk9VUF9DT1VOVCAqIFdPUktHUk9VUF9TSVpFICogNDtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBhZGFwdGVyID0gYXdhaXQgbmF2aWdhdG9yLmdwdS5yZXF1ZXN0QWRhcHRlcigpO1xuICBjb25zdCBkZXZpY2UgPSBhd2FpdCBhZGFwdGVyLnJlcXVlc3REZXZpY2UoKTtcblxuICAvLyDoqIjnrpfntZDmnpzjga7kv53lrZjlhYjjga7jg5Djg4Pjg5XjgqFcbiAgY29uc3QgcmVzdWx0QnVmZmVyID0gZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgc2l6ZTogQlVGRkVSX1NJWkUsXG4gICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX1NSQyxcbiAgfSk7XG5cbiAgLy8g57WQ5p6c5Y+W44KK5Ye644GX55So44Gu44K544OG44O844K444Oz44Kw44OQ44OD44OV44KhXG4gIGNvbnN0IHN0YWdpbmdCdWZmZXIgPSBkZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICBzaXplOiBCVUZGRVJfU0laRSxcbiAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuTUFQX1JFQUQgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgfSk7XG5cbiAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAvLyBjb21wdXRlIHBpcGVsaW5lIOOBruWun+ihjFxuICBjb25zdCBiaW5kR3JvdXBMYXlvdXQgPSBkZXZpY2UuY3JlYXRlQmluZEdyb3VwTGF5b3V0KHtcbiAgICBlbnRyaWVzOiBbXG4gICAgICB7XG4gICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkNPTVBVVEUsXG4gICAgICAgIGJ1ZmZlcjoge1xuICAgICAgICAgIHR5cGU6ICdzdG9yYWdlJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgY29uc3QgYmluZEdyb3VwID0gZGV2aWNlLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgbGF5b3V0OiBiaW5kR3JvdXBMYXlvdXQsXG4gICAgZW50cmllczogW1xuICAgICAge1xuICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICByZXNvdXJjZToge1xuICAgICAgICAgIGJ1ZmZlcjogcmVzdWx0QnVmZmVyLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcblxuICBjb25zdCBzaGFkZXJNb2R1bGUgPSBkZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICBjb2RlOiBzaGFkZXIsXG4gIH0pO1xuXG4gIGNvbnN0IGNvbXB1dGVQaXBlbGluZSA9IGRldmljZS5jcmVhdGVDb21wdXRlUGlwZWxpbmUoe1xuICAgIGxheW91dDogZGV2aWNlLmNyZWF0ZVBpcGVsaW5lTGF5b3V0KHtcbiAgICAgIGJpbmRHcm91cExheW91dHM6IFtiaW5kR3JvdXBMYXlvdXRdLFxuICAgIH0pLFxuICAgIGNvbXB1dGU6IHtcbiAgICAgIG1vZHVsZTogc2hhZGVyTW9kdWxlLFxuICAgICAgZW50cnlQb2ludDogJ21haW4nLFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCBjb21tYW5kRW5jb2RlciA9IGRldmljZS5jcmVhdGVDb21tYW5kRW5jb2RlcigpO1xuICBjb25zdCBjb21wdXRlUGFzcyA9IGNvbW1hbmRFbmNvZGVyLmJlZ2luQ29tcHV0ZVBhc3MoKTtcbiAgY29tcHV0ZVBhc3Muc2V0UGlwZWxpbmUoY29tcHV0ZVBpcGVsaW5lKTtcbiAgY29tcHV0ZVBhc3Muc2V0QmluZEdyb3VwKDAsIGJpbmRHcm91cCk7XG4gIGNvbXB1dGVQYXNzLmRpc3BhdGNoV29ya2dyb3VwcyhXT1JLR1JPVVBfQ09VTlQpO1xuICBjb21wdXRlUGFzcy5lbmQoKTtcblxuICAvLyDntZDmnpzjga7lj5bjgorlh7rjgZcgJiDooajnpLpcbiAgY29tbWFuZEVuY29kZXIuY29weUJ1ZmZlclRvQnVmZmVyKFxuICAgIHJlc3VsdEJ1ZmZlcixcbiAgICAwLFxuICAgIHN0YWdpbmdCdWZmZXIsXG4gICAgMCxcbiAgICBCVUZGRVJfU0laRVxuICApO1xuICBkZXZpY2UucXVldWUuc3VibWl0KFtjb21tYW5kRW5jb2Rlci5maW5pc2goKV0pO1xuICBhd2FpdCBzdGFnaW5nQnVmZmVyLm1hcEFzeW5jKFxuICAgIEdQVU1hcE1vZGUuUkVBRCxcbiAgICAwLFxuICAgIEJVRkZFUl9TSVpFXG4gICk7XG4gIGNvbnN0IGNvcHlBcnJheUJ1ZmZlciA9IHN0YWdpbmdCdWZmZXIuZ2V0TWFwcGVkUmFuZ2UoMCwgQlVGRkVSX1NJWkUpO1xuICBjb25zdCByZXN1bHQgPSBuZXcgVWludDMyQXJyYXkoY29weUFycmF5QnVmZmVyLnNsaWNlKDApKTtcbiAgc3RhZ2luZ0J1ZmZlci51bm1hcCgpO1xuICByZXN1bHQuZm9yRWFjaChlID0+IHtcbiAgICBpZiAoZSAhPSAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIOODj+ODg+OCt+ODpeODrOODvOODiOihqOekulxuICBjb25zdCBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgY29uc29sZS5sb2coYGR1cmF0aW9uOiAke01hdGgucm91bmQoZW5kIC0gc3RhcnQpfSBtc2ApO1xuICBjb25zb2xlLmxvZyhgaGFzaCByYXRlOiAke01hdGgucm91bmQoKDIgKiogMzIgKiAxMDAwIC8gKGVuZCAtIHN0YXJ0KSkgLyAoMTAyNCAqKiAzKSl9IEdIL3NgKTtcbn07XG4iLCJpbXBvcnQgYmFzaWNfcmVuZGVyX3BpcGVsaW5lIGZyb20gJy4vYmFzaWNfcmVuZGVyX3BpcGVsaW5lL21haW4nO1xuaW1wb3J0IGJhc2ljX2NvbXB1dGVfcGlwZWxpbmUgZnJvbSAnLi9iYXNpY19jb21wdXRlX3BpcGVsaW5lL21haW4nO1xuaW1wb3J0IGRlbW8wMSBmcm9tICcuL2RlbW8wMS9tYWluJztcbmltcG9ydCBkZW1vMDIgZnJvbSAnLi9kZW1vMDIvbWFpbic7XG5pbXBvcnQgZGVtbzAzIGZyb20gJy4vZGVtbzAzL21haW4nO1xuaW1wb3J0IGRlbW8wNCBmcm9tICcuL2RlbW8wNC9tYWluJztcbmltcG9ydCBkZW1vMDUgZnJvbSAnLi9kZW1vMDUvbWFpbic7XG5cbmNvbnN0IHBhZ2VzID0ge1xuICBiYXNpY19yZW5kZXJfcGlwZWxpbmU6IGJhc2ljX3JlbmRlcl9waXBlbGluZSxcbiAgYmFzaWNfY29tcHV0ZV9waXBlbGluZTogYmFzaWNfY29tcHV0ZV9waXBlbGluZSxcbiAgZGVtbzAxOiBkZW1vMDEsXG4gIGRlbW8wMjogZGVtbzAyLFxuICBkZW1vMDM6IGRlbW8wMyxcbiAgZGVtbzA0OiBkZW1vMDQsXG4gIGRlbW8wNTogZGVtbzA1LFxufTtcblxuZnVuY3Rpb24gaW5kZXgoKSB7XG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpKTtcbiAgZm9yIChjb25zdCBwYWdlIGluIHBhZ2VzKSB7XG4gICAgY29uc3QgYSA9IHVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG4gICAgYS5ocmVmID0gJy4vaW5kZXguaHRtbD9wYWdlPScgKyBwYWdlO1xuICAgIGEudGV4dENvbnRlbnQgPSBwYWdlO1xuICB9XG59XG5cbndpbmRvdy5vbmxvYWQgPSBhc3luYyAoKSA9PiB7XG4gIChwYWdlc1tuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KCdwYWdlJyldIHx8IGluZGV4KSgpO1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGBcbnN0cnVjdCBWZXJ0ZXhPdXQge1xuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb24gOiB2ZWM0ZixcbiAgQGxvY2F0aW9uKDApIGNvbG9yIDogdmVjNGZcbn1cblxuQHZlcnRleFxuZm4gdmVydGV4X21haW4oQGxvY2F0aW9uKDApIHBvc2l0aW9uOiB2ZWM0ZixcbiAgICAgICAgICAgICAgIEBsb2NhdGlvbigxKSBjb2xvcjogdmVjNGYpIC0+IFZlcnRleE91dFxue1xuICB2YXIgb3V0cHV0IDogVmVydGV4T3V0O1xuICBvdXRwdXQucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgb3V0cHV0LmNvbG9yID0gY29sb3I7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbkBmcmFnbWVudFxuZm4gZnJhZ21lbnRfbWFpbihmcmFnRGF0YTogVmVydGV4T3V0KSAtPiBAbG9jYXRpb24oMCkgdmVjNGZcbntcbiAgcmV0dXJuIGZyYWdEYXRhLmNvbG9yO1xufVxuYDtcbiIsImltcG9ydCBzaGFkZXIgZnJvbSAnLi9zaGFkZXIud2dzbCc7XG5pbXBvcnQgeyBCVUZGRVJfU0laRSB9IGZyb20gJy4vc2hhZGVyLndnc2wnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdoZWxsbywgd29ybGQhJyk7XG5cbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYkdQVV9BUEkjYmFzaWNfY29tcHV0ZV9waXBlbGluZVxuXG4gIGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCBuYXZpZ2F0b3IuZ3B1LnJlcXVlc3RBZGFwdGVyKCk7XG4gIGNvbnN0IGRldmljZSA9IGF3YWl0IGFkYXB0ZXIucmVxdWVzdERldmljZSgpO1xuXG4gIGNvbnN0IHNoYWRlck1vZHVsZSA9IGRldmljZS5jcmVhdGVTaGFkZXJNb2R1bGUoe1xuICAgIGNvZGU6IHNoYWRlcixcbiAgfSk7XG5cbiAgY29uc3Qgb3V0cHV0ID0gZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgc2l6ZTogQlVGRkVSX1NJWkUsXG4gICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX1NSQyxcbiAgfSk7XG5cbiAgY29uc3Qgc3RhZ2luZ0J1ZmZlciA9IGRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgIHNpemU6IEJVRkZFUl9TSVpFLFxuICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5NQVBfUkVBRCB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICB9KTtcblxuICBjb25zdCBiaW5kR3JvdXBMYXlvdXQgPSBkZXZpY2UuY3JlYXRlQmluZEdyb3VwTGF5b3V0KHtcbiAgICBlbnRyaWVzOiBbXG4gICAgICB7XG4gICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkNPTVBVVEUsXG4gICAgICAgIGJ1ZmZlcjoge1xuICAgICAgICAgIHR5cGU6ICdzdG9yYWdlJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgY29uc3QgYmluZEdyb3VwID0gZGV2aWNlLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgbGF5b3V0OiBiaW5kR3JvdXBMYXlvdXQsXG4gICAgZW50cmllczogW1xuICAgICAge1xuICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICByZXNvdXJjZToge1xuICAgICAgICAgIGJ1ZmZlcjogb3V0cHV0LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcblxuICBjb25zdCBjb21wdXRlUGlwZWxpbmUgPSBkZXZpY2UuY3JlYXRlQ29tcHV0ZVBpcGVsaW5lKHtcbiAgICBsYXlvdXQ6IGRldmljZS5jcmVhdGVQaXBlbGluZUxheW91dCh7XG4gICAgICBiaW5kR3JvdXBMYXlvdXRzOiBbYmluZEdyb3VwTGF5b3V0XSxcbiAgICB9KSxcbiAgICBjb21wdXRlOiB7XG4gICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgIGVudHJ5UG9pbnQ6ICdtYWluJyxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBjb21tYW5kRW5jb2RlciA9IGRldmljZS5jcmVhdGVDb21tYW5kRW5jb2RlcigpO1xuICBjb25zdCBwYXNzRW5jb2RlciA9IGNvbW1hbmRFbmNvZGVyLmJlZ2luQ29tcHV0ZVBhc3MoKTtcblxuICBwYXNzRW5jb2Rlci5zZXRQaXBlbGluZShjb21wdXRlUGlwZWxpbmUpO1xuICBwYXNzRW5jb2Rlci5zZXRCaW5kR3JvdXAoMCwgYmluZEdyb3VwKTtcbiAgcGFzc0VuY29kZXIuZGlzcGF0Y2hXb3JrZ3JvdXBzKE1hdGguY2VpbChCVUZGRVJfU0laRSAvIDY0KSk7XG5cbiAgcGFzc0VuY29kZXIuZW5kKCk7XG5cbiAgLy8gQ29weSBvdXRwdXQgYnVmZmVyIHRvIHN0YWdpbmcgYnVmZmVyXG4gIGNvbW1hbmRFbmNvZGVyLmNvcHlCdWZmZXJUb0J1ZmZlcihcbiAgICBvdXRwdXQsXG4gICAgMCwgLy8gU291cmNlIG9mZnNldFxuICAgIHN0YWdpbmdCdWZmZXIsXG4gICAgMCwgLy8gRGVzdGluYXRpb24gb2Zmc2V0XG4gICAgQlVGRkVSX1NJWkVcbiAgKTtcblxuICAvLyBFbmQgZnJhbWUgYnkgcGFzc2luZyBhcnJheSBvZiBjb21tYW5kIGJ1ZmZlcnMgdG8gY29tbWFuZCBxdWV1ZSBmb3IgZXhlY3V0aW9uXG4gIGRldmljZS5xdWV1ZS5zdWJtaXQoW2NvbW1hbmRFbmNvZGVyLmZpbmlzaCgpXSk7XG5cbiAgLy8gbWFwIHN0YWdpbmcgYnVmZmVyIHRvIHJlYWQgcmVzdWx0cyBiYWNrIHRvIEpTXG4gIGF3YWl0IHN0YWdpbmdCdWZmZXIubWFwQXN5bmMoXG4gICAgR1BVTWFwTW9kZS5SRUFELFxuICAgIDAsIC8vIE9mZnNldFxuICAgIEJVRkZFUl9TSVpFIC8vIExlbmd0aFxuICApO1xuXG4gIGNvbnN0IGNvcHlBcnJheUJ1ZmZlciA9IHN0YWdpbmdCdWZmZXIuZ2V0TWFwcGVkUmFuZ2UoMCwgQlVGRkVSX1NJWkUpO1xuICBjb25zdCBkYXRhID0gY29weUFycmF5QnVmZmVyLnNsaWNlKDApO1xuICBzdGFnaW5nQnVmZmVyLnVubWFwKCk7XG4gIGNvbnNvbGUubG9nKG5ldyBGbG9hdDMyQXJyYXkoZGF0YSkpO1xufTtcbiIsImltcG9ydCBzaGFkZXIgZnJvbSAnLi9zaGFkZXIud2dzbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jICgpID0+IHtcbiAgY29uc29sZS5sb2coJ2hlbGxvLCB3b3JsZCEnKTtcblxuICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViR1BVX0FQSSNiYXNpY19yZW5kZXJfcGlwZWxpbmVcblxuICBjb25zdCBjdnMgPSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpKTtcbiAgY3ZzLndpZHRoID0gNTAwO1xuICBjdnMuaGVpZ2h0ID0gNTAwO1xuXG4gIGNvbnN0IGN0eCA9IGN2cy5nZXRDb250ZXh0KCd3ZWJncHUnKTtcblxuICBjb25zdCBhZGFwdGVyID0gYXdhaXQgbmF2aWdhdG9yLmdwdS5yZXF1ZXN0QWRhcHRlcigpO1xuICBjb25zdCBkZXZpY2UgPSBhd2FpdCBhZGFwdGVyLnJlcXVlc3REZXZpY2UoKTtcblxuICBjb25zdCBzaGFkZXJNb2R1bGUgPSBkZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICBjb2RlOiBzaGFkZXIsXG4gIH0pO1xuXG4gIGN0eC5jb25maWd1cmUoe1xuICAgIGRldmljZTogZGV2aWNlLFxuICAgIGZvcm1hdDogbmF2aWdhdG9yLmdwdS5nZXRQcmVmZXJyZWRDYW52YXNGb3JtYXQoKSxcbiAgICBhbHBoYU1vZGU6ICdwcmVtdWx0aXBsaWVkJyxcbiAgfSk7XG5cblxuICAvLyDopIfmlbDjga7jg5Djg4Pjg5XjgqHjg7zjgpLkvb/jgYbniYhcblxuICAvLyB2ZXJ0aWNlc1xuXG4gIGNvbnN0IHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgMC4wLCAxLjAsIDAuMCwgMS4wLFxuICAgIDEuMCwgLTEuMCwgMC4wLCAxLjAsXG4gICAgLTEuMCwgLTEuMCwgMC4wLCAxLjAsXG4gIF0pO1xuXG4gIGNvbnN0IHZlcnRleEJ1ZmZlciA9IGRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgIHNpemU6IHZlcnRpY2VzLmJ5dGVMZW5ndGgsIC8vIG1ha2UgaXQgYmlnIGVub3VnaCB0byBzdG9yZSB2ZXJ0aWNlcyBpblxuICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5WRVJURVggfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgfSk7XG4gIGRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcih2ZXJ0ZXhCdWZmZXIsIDAsIHZlcnRpY2VzLCAwLCB2ZXJ0aWNlcy5sZW5ndGgpO1xuXG4gIC8vIGNvbG9yc1xuXG4gIGNvbnN0IGNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgIDEuMCwgMC4wLCAwLjAsIDEuMCxcbiAgICAwLjAsIDEuMCwgMC4wLCAxLjAsXG4gICAgMC4wLCAwLjAsIDEuMCwgMS4wLFxuICBdKTtcblxuICBjb25zdCBjb2xvckJ1ZmZlciA9IGRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgIHNpemU6IGNvbG9ycy5ieXRlTGVuZ3RoLCAvLyBtYWtlIGl0IGJpZyBlbm91Z2ggdG8gc3RvcmUgdmVydGljZXMgaW5cbiAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gIH0pO1xuICBkZXZpY2UucXVldWUud3JpdGVCdWZmZXIoY29sb3JCdWZmZXIsIDAsIGNvbG9ycywgMCwgY29sb3JzLmxlbmd0aCk7XG5cbiAgY29uc3QgdmVydGV4QnVmZmVyczogR1BVVmVydGV4QnVmZmVyTGF5b3V0W10gPSBbXG4gICAge1xuICAgICAgLy8gcG9zaXRpb25cbiAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAwLFxuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICBmb3JtYXQ6ICdmbG9hdDMyeDQnLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGFycmF5U3RyaWRlOiAxNixcbiAgICAgIHN0ZXBNb2RlOiAndmVydGV4JyxcbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGNvbG9yXG4gICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogMSwgLy8gcG9zaXRpb25cbiAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgZm9ybWF0OiAnZmxvYXQzMng0JyxcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGFycmF5U3RyaWRlOiAxNixcbiAgICAgIHN0ZXBNb2RlOiAndmVydGV4JyxcbiAgICB9XG4gIF07XG5cbiAgLy8g44GT44GT44GL44KJ44OR44Kk44OX44Op44Kk44Oz44Gu6Kit5a6aXG5cbiAgY29uc3QgcGlwZWxpbmVEZXNjcmlwdG9yOiBHUFVSZW5kZXJQaXBlbGluZURlc2NyaXB0b3IgPSB7XG4gICAgdmVydGV4OiB7XG4gICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgIGVudHJ5UG9pbnQ6ICd2ZXJ0ZXhfbWFpbicsXG4gICAgICBidWZmZXJzOiB2ZXJ0ZXhCdWZmZXJzLFxuICAgIH0sXG4gICAgZnJhZ21lbnQ6IHtcbiAgICAgIG1vZHVsZTogc2hhZGVyTW9kdWxlLFxuICAgICAgZW50cnlQb2ludDogJ2ZyYWdtZW50X21haW4nLFxuICAgICAgdGFyZ2V0czogW1xuICAgICAgICB7XG4gICAgICAgICAgZm9ybWF0OiBuYXZpZ2F0b3IuZ3B1LmdldFByZWZlcnJlZENhbnZhc0Zvcm1hdCgpLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuICAgIHByaW1pdGl2ZToge1xuICAgICAgdG9wb2xvZ3k6ICd0cmlhbmdsZS1saXN0JyxcbiAgICB9LFxuICAgIGxheW91dDogJ2F1dG8nLFxuICB9O1xuXG4gIGNvbnN0IHJlbmRlclBpcGVsaW5lID0gZGV2aWNlLmNyZWF0ZVJlbmRlclBpcGVsaW5lKHBpcGVsaW5lRGVzY3JpcHRvcik7XG5cbiAgY29uc3QgY29tbWFuZEVuY29kZXIgPSBkZXZpY2UuY3JlYXRlQ29tbWFuZEVuY29kZXIoKTtcblxuICAvLyDog4zmma/oibJcbiAgLy8gY29uc3QgY2xlYXJDb2xvciA9IHsgcjogMC4wLCBnOiAwLjUsIGI6IDEuMCwgYTogMS4wIH07XG4gIGNvbnN0IGNsZWFyQ29sb3IgPSB7IHI6IDAuMCwgZzogMC4wLCBiOiAwLjAsIGE6IDEuMCB9O1xuXG4gIGNvbnN0IHJlbmRlclBhc3NEZXNjcmlwdG9yOiBHUFVSZW5kZXJQYXNzRGVzY3JpcHRvciA9IHtcbiAgICBjb2xvckF0dGFjaG1lbnRzOiBbXG4gICAgICB7XG4gICAgICAgIGNsZWFyVmFsdWU6IGNsZWFyQ29sb3IsXG4gICAgICAgIGxvYWRPcDogJ2NsZWFyJyxcbiAgICAgICAgc3RvcmVPcDogJ3N0b3JlJyxcbiAgICAgICAgdmlldzogY3R4LmdldEN1cnJlbnRUZXh0dXJlKCkuY3JlYXRlVmlldygpLFxuICAgICAgfSxcbiAgICBdLFxuICB9O1xuXG4gIGNvbnN0IHBhc3NFbmNvZGVyID0gY29tbWFuZEVuY29kZXIuYmVnaW5SZW5kZXJQYXNzKHJlbmRlclBhc3NEZXNjcmlwdG9yKTtcblxuICBwYXNzRW5jb2Rlci5zZXRQaXBlbGluZShyZW5kZXJQaXBlbGluZSk7XG4gIC8vIHNsb3Qg44KS5YiG44GR44Gm44OQ44OD44OV44Kh44KS6Kit5a6a44GZ44KLXG4gIHBhc3NFbmNvZGVyLnNldFZlcnRleEJ1ZmZlcigwLCB2ZXJ0ZXhCdWZmZXIpO1xuICBwYXNzRW5jb2Rlci5zZXRWZXJ0ZXhCdWZmZXIoMSwgY29sb3JCdWZmZXIpO1xuICBwYXNzRW5jb2Rlci5kcmF3KDMpO1xuICBwYXNzRW5jb2Rlci5lbmQoKTtcblxuICBkZXZpY2UucXVldWUuc3VibWl0KFtjb21tYW5kRW5jb2Rlci5maW5pc2goKV0pO1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGBcbnN0cnVjdCBWZXJ0ZXhPdXQge1xuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb24gOiB2ZWM0ZixcbiAgQGxvY2F0aW9uKDApIGNvbG9yIDogdmVjNGZcbn1cblxuQHZlcnRleFxuZm4gdmVydGV4X21haW4oQGxvY2F0aW9uKDApIHBvc2l0aW9uOiB2ZWM0ZixcbiAgICAgICAgICAgICAgIEBsb2NhdGlvbigxKSBjb2xvcjogdmVjNGYpIC0+IFZlcnRleE91dFxue1xuICB2YXIgb3V0cHV0IDogVmVydGV4T3V0O1xuICBvdXRwdXQucG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLnh5eiAqIDAuNSwgcG9zaXRpb24udyk7XG4gIG91dHB1dC5jb2xvciA9IGNvbG9yO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5AZnJhZ21lbnRcbmZuIGZyYWdtZW50X21haW4oZnJhZ0RhdGE6IFZlcnRleE91dCkgLT4gQGxvY2F0aW9uKDApIHZlYzRmXG57XG4gIHJldHVybiBmcmFnRGF0YS5jb2xvcjtcbn1cbmA7XG4iLCJleHBvcnQgZGVmYXVsdCBgXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMClcbnZhcjxzdG9yYWdlLCByZWFkX3dyaXRlPiBvdXRwdXQ6IGFycmF5PGYzMj47XG5cbi8vIOODkOODg+ODleOCoeOCkuWIneacn+WMllxuQGNvbXB1dGUgQHdvcmtncm91cF9zaXplKDY0KVxuZm4gaW5pdChAYnVpbHRpbihnbG9iYWxfaW52b2NhdGlvbl9pZCkgZ2xvYmFsX2lkIDogdmVjM3UpIHtcbiAgb3V0cHV0W2dsb2JhbF9pZC54XSA9IGYzMihnbG9iYWxfaWQueCkgKiAxMDAwLjtcbn1cblxuLy8g44OQ44OD44OV44Kh44Gu5YCk44KSMeOCpOODs+OCr+ODquODoeODs+ODiFxuQGNvbXB1dGUgQHdvcmtncm91cF9zaXplKDY0KVxuZm4gaW5jcmVtZW50KEBidWlsdGluKGdsb2JhbF9pbnZvY2F0aW9uX2lkKSBnbG9iYWxfaWQgOiB2ZWMzdSkge1xuICBvdXRwdXRbZ2xvYmFsX2lkLnhdICs9IDEuO1xufVxuYDtcbiIsImV4cG9ydCBkZWZhdWx0IGBcbnN0cnVjdCBWZXJ0ZXhPdXQge1xuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb24gOiB2ZWM0ZixcbiAgQGxvY2F0aW9uKDApIGNvbG9yIDogdmVjNGZcbn1cblxuQHZlcnRleFxuZm4gdmVydGV4X21haW4oQGxvY2F0aW9uKDApIHBvc2l0aW9uOiB2ZWMyZixcbiAgICAgICAgICAgICAgIEBsb2NhdGlvbigxKSB2ZWxvY2l0eTogdmVjMmYpIC0+IFZlcnRleE91dFxue1xuICB2YXIgb3V0cHV0IDogVmVydGV4T3V0O1xuICBvdXRwdXQucG9zaXRpb24gPSB2ZWM0Zihwb3NpdGlvbiwgMC4sIDEuKTtcbiAgb3V0cHV0LmNvbG9yID0gdmVjNGYoMS4sIDAuLCAwLiwgMS4pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5AZnJhZ21lbnRcbmZuIGZyYWdtZW50X21haW4oZnJhZ0RhdGE6IFZlcnRleE91dCkgLT4gQGxvY2F0aW9uKDApIHZlYzRmXG57XG4gIHJldHVybiBmcmFnRGF0YS5jb2xvcjtcbn1cblxuc3RydWN0IFBhcnRpY2xlIHtcbiAgcG9zaXRpb24gOiB2ZWMyZixcbiAgdmVsb2NpdHkgOiB2ZWMyZixcbn1cblxuQGJpbmRpbmcoMCkgQGdyb3VwKDApXG52YXI8c3RvcmFnZSwgcmVhZF93cml0ZT4gcGFydGljbGVzOiBhcnJheTxQYXJ0aWNsZT47XG5cbkBjb21wdXRlIEB3b3JrZ3JvdXBfc2l6ZSg2NClcbmZuIHVwZGF0ZShAYnVpbHRpbihnbG9iYWxfaW52b2NhdGlvbl9pZCkgZ2xvYmFsX2lkIDogdmVjM3UpIHtcbiAgbGV0IGcgPSB2ZWMyZigwLiwgMC4pO1xuICBsZXQgaWR4ID0gZ2xvYmFsX2lkLng7XG4gIGxldCBwID0gcGFydGljbGVzW2lkeF0ucG9zaXRpb247XG4gIGxldCB2ID0gcGFydGljbGVzW2lkeF0udmVsb2NpdHk7XG5cbiAgcGFydGljbGVzW2lkeF0ucG9zaXRpb24gPSBwICsgdiAqIC4yO1xuICBwYXJ0aWNsZXNbaWR4XS52ZWxvY2l0eSA9IHZcbiAgICAvLyDph43lipvliqDpgJ/luqZcbiAgICArICgoZyAtIHApIC8gcG93KGRpc3RhbmNlKGcsIHApICsgMS4sIDIuKSkgKiAuMDVcbiAgICAvLyDnqbrmsJfmirXmipdcbiAgICAtIHYgKiBwb3cobGVuZ3RoKHYpLCAyLikgKiAuMDU7XG59XG5gO1xuIiwiaW1wb3J0IHNoYWRlciBmcm9tICcuL3NoYWRlci53Z3NsJztcbi8qKlxuICogTUQ0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jICgpID0+IHtcbiAgY29uc3QgYWRhcHRlciA9IGF3YWl0IG5hdmlnYXRvci5ncHUucmVxdWVzdEFkYXB0ZXIoKTtcbiAgY29uc3QgZGV2aWNlID0gYXdhaXQgYWRhcHRlci5yZXF1ZXN0RGV2aWNlKCk7XG5cbiAgLy8g6KiI566X57WQ5p6c44Gu5L+d5a2Y5YWI44Gu44OQ44OD44OV44KhXG4gIGNvbnN0IHJlc3VsdEJ1ZmZlciA9IGRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgIHNpemU6IDE2LFxuICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5TVE9SQUdFIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9TUkMsXG4gIH0pO1xuXG4gIC8vIOe1kOaenOWPluOCiuWHuuOBl+eUqOOBruOCueODhuODvOOCuOODs+OCsOODkOODg+ODleOCoVxuICBjb25zdCBzdGFnaW5nQnVmZmVyID0gZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgc2l6ZTogMTYsXG4gICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLk1BUF9SRUFEIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gIH0pO1xuXG5cbiAgLy8gY29tcHV0ZSBwaXBlbGluZSDjga7lrp/ooYxcbiAgY29uc3QgYmluZEdyb3VwTGF5b3V0ID0gZGV2aWNlLmNyZWF0ZUJpbmRHcm91cExheW91dCh7XG4gICAgZW50cmllczogW1xuICAgICAge1xuICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5DT01QVVRFLFxuICAgICAgICBidWZmZXI6IHtcbiAgICAgICAgICB0eXBlOiAnc3RvcmFnZScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIGNvbnN0IGJpbmRHcm91cCA9IGRldmljZS5jcmVhdGVCaW5kR3JvdXAoe1xuICAgIGxheW91dDogYmluZEdyb3VwTGF5b3V0LFxuICAgIGVudHJpZXM6IFtcbiAgICAgIHtcbiAgICAgICAgYmluZGluZzogMCxcbiAgICAgICAgcmVzb3VyY2U6IHtcbiAgICAgICAgICBidWZmZXI6IHJlc3VsdEJ1ZmZlcixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgY29uc3Qgc2hhZGVyTW9kdWxlID0gZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZSh7XG4gICAgY29kZTogc2hhZGVyLFxuICB9KTtcblxuICBjb25zdCBjb21wdXRlUGlwZWxpbmUgPSBkZXZpY2UuY3JlYXRlQ29tcHV0ZVBpcGVsaW5lKHtcbiAgICBsYXlvdXQ6IGRldmljZS5jcmVhdGVQaXBlbGluZUxheW91dCh7XG4gICAgICBiaW5kR3JvdXBMYXlvdXRzOiBbYmluZEdyb3VwTGF5b3V0XSxcbiAgICB9KSxcbiAgICBjb21wdXRlOiB7XG4gICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgIGVudHJ5UG9pbnQ6ICdtYWluJyxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBjb21tYW5kRW5jb2RlciA9IGRldmljZS5jcmVhdGVDb21tYW5kRW5jb2RlcigpO1xuICBjb25zdCBjb21wdXRlUGFzcyA9IGNvbW1hbmRFbmNvZGVyLmJlZ2luQ29tcHV0ZVBhc3MoKTtcbiAgY29tcHV0ZVBhc3Muc2V0UGlwZWxpbmUoY29tcHV0ZVBpcGVsaW5lKTtcbiAgY29tcHV0ZVBhc3Muc2V0QmluZEdyb3VwKDAsIGJpbmRHcm91cCk7XG4gIGNvbXB1dGVQYXNzLmRpc3BhdGNoV29ya2dyb3VwcygxKTtcbiAgY29tcHV0ZVBhc3MuZW5kKCk7XG5cblxuICAvLyDntZDmnpzjga7lj5bjgorlh7rjgZcgJiDooajnpLpcbiAgY29tbWFuZEVuY29kZXIuY29weUJ1ZmZlclRvQnVmZmVyKFxuICAgIHJlc3VsdEJ1ZmZlcixcbiAgICAwLFxuICAgIHN0YWdpbmdCdWZmZXIsXG4gICAgMCxcbiAgICAxNlxuICApO1xuICBkZXZpY2UucXVldWUuc3VibWl0KFtjb21tYW5kRW5jb2Rlci5maW5pc2goKV0pO1xuICBhd2FpdCBzdGFnaW5nQnVmZmVyLm1hcEFzeW5jKFxuICAgIEdQVU1hcE1vZGUuUkVBRCxcbiAgICAwLFxuICAgIDE2XG4gICk7XG4gIGNvbnN0IGNvcHlBcnJheUJ1ZmZlciA9IHN0YWdpbmdCdWZmZXIuZ2V0TWFwcGVkUmFuZ2UoMCwgMTYpO1xuICBjb25zdCByZXN1bHQgPSBuZXcgVWludDhBcnJheShjb3B5QXJyYXlCdWZmZXIuc2xpY2UoMCkpO1xuICBzdGFnaW5nQnVmZmVyLnVubWFwKCk7XG4gIGxldCBoZXggPSAnJztcbiAgZm9yIChjb25zdCBlIG9mIHJlc3VsdCkge1xuICAgIGhleCArPSBlLnRvU3RyaW5nKDE2KTtcbiAgfVxuICBjb25zb2xlLmxvZyhoZXgpO1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGBcbmZuIEYoWDogdTMyLCBZOiB1MzIsIFo6IHUzMikgLT4gdTMyIHtcbiAgcmV0dXJuIChYICYgWSkgfCAoflggJiBaKTtcbn1cblxuZm4gRyhYOiB1MzIsIFk6IHUzMiwgWjogdTMyKSAtPiB1MzIge1xuICByZXR1cm4gKFggJiBZKSB8IChYICYgWikgfCAoWSAmIFopO1xufVxuXG5mbiBIKFg6IHUzMiwgWTogdTMyLCBaOiB1MzIpIC0+IHUzMiB7XG4gIHJldHVybiBYIF4gWSBeIFo7XG59XG5cbmZuIHJvdGF0ZShhOiB1MzIsIHM6IHUzMikgLT4gdTMyIHtcbiAgcmV0dXJuIChhIDw8IHMpIHwgKGEgPj4gKDMyIC0gcykpO1xufVxuXG5mbiBGRihhOiBwdHI8cHJpdmF0ZSx1MzI+LCBiOiB1MzIsIGM6IHUzMiwgZDogdTMyLCB4OiB1MzIsIHM6IHUzMikge1xuICAqYSA9IHJvdGF0ZSgqYSArIEYoYiwgYywgZCkgKyB4LCBzKTtcbn1cblxuZm4gR0coYTogcHRyPHByaXZhdGUsdTMyPiwgYjogdTMyLCBjOiB1MzIsIGQ6IHUzMiwgeDogdTMyLCBzOiB1MzIpIHtcbiAgKmEgPSByb3RhdGUoKmEgKyBHKGIsIGMsIGQpICsgeCArIDB4NWE4Mjc5OTl1LCBzKTtcbn1cblxuZm4gSEgoYTogcHRyPHByaXZhdGUsdTMyPiwgYjogdTMyLCBjOiB1MzIsIGQ6IHUzMiwgeDogdTMyLCBzOiB1MzIpIHtcbiAgKmEgPSByb3RhdGUoKmEgKyBIKGIsIGMsIGQpICsgeCArIDB4NmVkOWViYTF1LCBzKTtcbn1cblxudmFyPHByaXZhdGU+IEEgPSAweDY3NDUyMzAxdTtcbnZhcjxwcml2YXRlPiBCID0gMHhlZmNkYWI4OXU7XG52YXI8cHJpdmF0ZT4gQyA9IDB4OThiYWRjZmV1O1xudmFyPHByaXZhdGU+IEQgPSAweDEwMzI1NDc2dTtcblxuZm4gdXBkYXRlKFg6IGFycmF5PHUzMiwgMTY+KSB7XG4gIGxldCBBQSA9IEE7XG4gIGxldCBCQiA9IEI7XG4gIGxldCBDQyA9IEM7XG4gIGxldCBERCA9IEQ7XG5cbiAgRkYoJkEsIEIsIEMsIEQsIFhbMF0sIDMpO1xuICBGRigmRCwgQSwgQiwgQywgWFsxXSwgNyk7XG4gIEZGKCZDLCBELCBBLCBCLCBYWzJdLCAxMSk7XG4gIEZGKCZCLCBDLCBELCBBLCBYWzNdLCAxOSk7XG4gIEZGKCZBLCBCLCBDLCBELCBYWzRdLCAzKTtcbiAgRkYoJkQsIEEsIEIsIEMsIFhbNV0sIDcpO1xuICBGRigmQywgRCwgQSwgQiwgWFs2XSwgMTEpO1xuICBGRigmQiwgQywgRCwgQSwgWFs3XSwgMTkpO1xuICBGRigmQSwgQiwgQywgRCwgWFs4XSwgMyk7XG4gIEZGKCZELCBBLCBCLCBDLCBYWzldLCA3KTtcbiAgRkYoJkMsIEQsIEEsIEIsIFhbMTBdLCAxMSk7XG4gIEZGKCZCLCBDLCBELCBBLCBYWzExXSwgMTkpO1xuICBGRigmQSwgQiwgQywgRCwgWFsxMl0sIDMpO1xuICBGRigmRCwgQSwgQiwgQywgWFsxM10sIDcpO1xuICBGRigmQywgRCwgQSwgQiwgWFsxNF0sIDExKTtcbiAgRkYoJkIsIEMsIEQsIEEsIFhbMTVdLCAxOSk7XG5cbiAgR0coJkEsIEIsIEMsIEQsIFhbMF0sIDMpO1xuICBHRygmRCwgQSwgQiwgQywgWFs0XSwgNSk7XG4gIEdHKCZDLCBELCBBLCBCLCBYWzhdLCA5KTtcbiAgR0coJkIsIEMsIEQsIEEsIFhbMTJdLCAxMyk7XG4gIEdHKCZBLCBCLCBDLCBELCBYWzFdLCAzKTtcbiAgR0coJkQsIEEsIEIsIEMsIFhbNV0sIDUpO1xuICBHRygmQywgRCwgQSwgQiwgWFs5XSwgOSk7XG4gIEdHKCZCLCBDLCBELCBBLCBYWzEzXSwgMTMpO1xuICBHRygmQSwgQiwgQywgRCwgWFsyXSwgMyk7XG4gIEdHKCZELCBBLCBCLCBDLCBYWzZdLCA1KTtcbiAgR0coJkMsIEQsIEEsIEIsIFhbMTBdLCA5KTtcbiAgR0coJkIsIEMsIEQsIEEsIFhbMTRdLCAxMyk7XG4gIEdHKCZBLCBCLCBDLCBELCBYWzNdLCAzKTtcbiAgR0coJkQsIEEsIEIsIEMsIFhbN10sIDUpO1xuICBHRygmQywgRCwgQSwgQiwgWFsxMV0sIDkpO1xuICBHRygmQiwgQywgRCwgQSwgWFsxNV0sIDEzKTtcblxuICBISCgmQSwgQiwgQywgRCwgWFswXSwgMyk7XG4gIEhIKCZELCBBLCBCLCBDLCBYWzhdLCA5KTtcbiAgSEgoJkMsIEQsIEEsIEIsIFhbNF0sIDExKTtcbiAgSEgoJkIsIEMsIEQsIEEsIFhbMTJdLCAxNSk7XG4gIEhIKCZBLCBCLCBDLCBELCBYWzJdLCAzKTtcbiAgSEgoJkQsIEEsIEIsIEMsIFhbMTBdLCA5KTtcbiAgSEgoJkMsIEQsIEEsIEIsIFhbNl0sIDExKTtcbiAgSEgoJkIsIEMsIEQsIEEsIFhbMTRdLCAxNSk7XG4gIEhIKCZBLCBCLCBDLCBELCBYWzFdLCAzKTtcbiAgSEgoJkQsIEEsIEIsIEMsIFhbOV0sIDkpO1xuICBISCgmQywgRCwgQSwgQiwgWFs1XSwgMTEpO1xuICBISCgmQiwgQywgRCwgQSwgWFsxM10sIDE1KTtcbiAgSEgoJkEsIEIsIEMsIEQsIFhbM10sIDMpO1xuICBISCgmRCwgQSwgQiwgQywgWFsxMV0sIDkpO1xuICBISCgmQywgRCwgQSwgQiwgWFs3XSwgMTEpO1xuICBISCgmQiwgQywgRCwgQSwgWFsxNV0sIDE1KTtcblxuICBBICs9IEFBO1xuICBCICs9IEJCO1xuICBDICs9IENDO1xuICBEICs9IEREO1xufVxuXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMClcbnZhcjxzdG9yYWdlLCByZWFkX3dyaXRlPiByZXN1bHQ6IHZlYzR1O1xuXG5AY29tcHV0ZSBAd29ya2dyb3VwX3NpemUoMSlcbmZuIG1haW4oKSB7XG4gIC8vICdiYWFhJyDjga4gbWQ0IOOCkuioiOeul1xuICB1cGRhdGUoYXJyYXk8dTMyLCAxNj4oXG4gICAgMHg2MTYxNjE2MnUsIDB4ODB1LCAwdSwgMHUsXG4gICAgMHUsIDB1LCAwdSwgMHUsXG4gICAgMHUsIDB1LCAwdSwgMHUsXG4gICAgMHUsIDB1LCAzMnUsIDB1KSk7XG4gIHJlc3VsdCA9IHZlYzR1KEEsIEIsIEMsIEQpO1xufVxuYDtcbiIsImV4cG9ydCBjb25zdCBXT1JLR1JPVVBfQ09VTlRfQklUUyA9IDE0O1xuZXhwb3J0IGNvbnN0IFdPUktHUk9VUF9TSVpFX0JJVFMgPSA2O1xuXG5leHBvcnQgZGVmYXVsdCBgXG5mbiBGKFg6IHUzMiwgWTogdTMyLCBaOiB1MzIpIC0+IHUzMiB7XG4gIHJldHVybiAoWCAmIFkpIHwgKH5YICYgWik7XG59XG5cbmZuIEcoWDogdTMyLCBZOiB1MzIsIFo6IHUzMikgLT4gdTMyIHtcbiAgcmV0dXJuIChYICYgWSkgfCAoWCAmIFopIHwgKFkgJiBaKTtcbn1cblxuZm4gSChYOiB1MzIsIFk6IHUzMiwgWjogdTMyKSAtPiB1MzIge1xuICByZXR1cm4gWCBeIFkgXiBaO1xufVxuXG5mbiByb3RhdGUoYTogdTMyLCBzOiB1MzIpIC0+IHUzMiB7XG4gIHJldHVybiAoYSA8PCBzKSB8IChhID4+ICgzMiAtIHMpKTtcbn1cblxuZm4gRkYoYTogcHRyPHByaXZhdGUsdTMyPiwgYjogdTMyLCBjOiB1MzIsIGQ6IHUzMiwgeDogdTMyLCBzOiB1MzIpIHtcbiAgKmEgPSByb3RhdGUoKmEgKyBGKGIsIGMsIGQpICsgeCwgcyk7XG59XG5cbmZuIEdHKGE6IHB0cjxwcml2YXRlLHUzMj4sIGI6IHUzMiwgYzogdTMyLCBkOiB1MzIsIHg6IHUzMiwgczogdTMyKSB7XG4gICphID0gcm90YXRlKCphICsgRyhiLCBjLCBkKSArIHggKyAweDVhODI3OTk5dSwgcyk7XG59XG5cbmZuIEhIKGE6IHB0cjxwcml2YXRlLHUzMj4sIGI6IHUzMiwgYzogdTMyLCBkOiB1MzIsIHg6IHUzMiwgczogdTMyKSB7XG4gICphID0gcm90YXRlKCphICsgSChiLCBjLCBkKSArIHggKyAweDZlZDllYmExdSwgcyk7XG59XG5cbnZhcjxwcml2YXRlPiBBOiB1MzI7XG52YXI8cHJpdmF0ZT4gQjogdTMyO1xudmFyPHByaXZhdGU+IEM6IHUzMjtcbnZhcjxwcml2YXRlPiBEOiB1MzI7XG5cbmZuIHVwZGF0ZShYOiBhcnJheTx1MzIsIDE2Pikge1xuICBsZXQgQUEgPSBBO1xuICBsZXQgQkIgPSBCO1xuICBsZXQgQ0MgPSBDO1xuICBsZXQgREQgPSBEO1xuXG4gIEZGKCZBLCBCLCBDLCBELCBYWzBdLCAzKTtcbiAgRkYoJkQsIEEsIEIsIEMsIFhbMV0sIDcpO1xuICBGRigmQywgRCwgQSwgQiwgWFsyXSwgMTEpO1xuICBGRigmQiwgQywgRCwgQSwgWFszXSwgMTkpO1xuICBGRigmQSwgQiwgQywgRCwgWFs0XSwgMyk7XG4gIEZGKCZELCBBLCBCLCBDLCBYWzVdLCA3KTtcbiAgRkYoJkMsIEQsIEEsIEIsIFhbNl0sIDExKTtcbiAgRkYoJkIsIEMsIEQsIEEsIFhbN10sIDE5KTtcbiAgRkYoJkEsIEIsIEMsIEQsIFhbOF0sIDMpO1xuICBGRigmRCwgQSwgQiwgQywgWFs5XSwgNyk7XG4gIEZGKCZDLCBELCBBLCBCLCBYWzEwXSwgMTEpO1xuICBGRigmQiwgQywgRCwgQSwgWFsxMV0sIDE5KTtcbiAgRkYoJkEsIEIsIEMsIEQsIFhbMTJdLCAzKTtcbiAgRkYoJkQsIEEsIEIsIEMsIFhbMTNdLCA3KTtcbiAgRkYoJkMsIEQsIEEsIEIsIFhbMTRdLCAxMSk7XG4gIEZGKCZCLCBDLCBELCBBLCBYWzE1XSwgMTkpO1xuXG4gIEdHKCZBLCBCLCBDLCBELCBYWzBdLCAzKTtcbiAgR0coJkQsIEEsIEIsIEMsIFhbNF0sIDUpO1xuICBHRygmQywgRCwgQSwgQiwgWFs4XSwgOSk7XG4gIEdHKCZCLCBDLCBELCBBLCBYWzEyXSwgMTMpO1xuICBHRygmQSwgQiwgQywgRCwgWFsxXSwgMyk7XG4gIEdHKCZELCBBLCBCLCBDLCBYWzVdLCA1KTtcbiAgR0coJkMsIEQsIEEsIEIsIFhbOV0sIDkpO1xuICBHRygmQiwgQywgRCwgQSwgWFsxM10sIDEzKTtcbiAgR0coJkEsIEIsIEMsIEQsIFhbMl0sIDMpO1xuICBHRygmRCwgQSwgQiwgQywgWFs2XSwgNSk7XG4gIEdHKCZDLCBELCBBLCBCLCBYWzEwXSwgOSk7XG4gIEdHKCZCLCBDLCBELCBBLCBYWzE0XSwgMTMpO1xuICBHRygmQSwgQiwgQywgRCwgWFszXSwgMyk7XG4gIEdHKCZELCBBLCBCLCBDLCBYWzddLCA1KTtcbiAgR0coJkMsIEQsIEEsIEIsIFhbMTFdLCA5KTtcbiAgR0coJkIsIEMsIEQsIEEsIFhbMTVdLCAxMyk7XG5cbiAgSEgoJkEsIEIsIEMsIEQsIFhbMF0sIDMpO1xuICBISCgmRCwgQSwgQiwgQywgWFs4XSwgOSk7XG4gIEhIKCZDLCBELCBBLCBCLCBYWzRdLCAxMSk7XG4gIEhIKCZCLCBDLCBELCBBLCBYWzEyXSwgMTUpO1xuICBISCgmQSwgQiwgQywgRCwgWFsyXSwgMyk7XG4gIEhIKCZELCBBLCBCLCBDLCBYWzEwXSwgOSk7XG4gIEhIKCZDLCBELCBBLCBCLCBYWzZdLCAxMSk7XG4gIEhIKCZCLCBDLCBELCBBLCBYWzE0XSwgMTUpO1xuICBISCgmQSwgQiwgQywgRCwgWFsxXSwgMyk7XG4gIEhIKCZELCBBLCBCLCBDLCBYWzldLCA5KTtcbiAgSEgoJkMsIEQsIEEsIEIsIFhbNV0sIDExKTtcbiAgSEgoJkIsIEMsIEQsIEEsIFhbMTNdLCAxNSk7XG4gIEhIKCZBLCBCLCBDLCBELCBYWzNdLCAzKTtcbiAgSEgoJkQsIEEsIEIsIEMsIFhbMTFdLCA5KTtcbiAgSEgoJkMsIEQsIEEsIEIsIFhbN10sIDExKTtcbiAgSEgoJkIsIEMsIEQsIEEsIFhbMTVdLCAxNSk7XG5cbiAgQSArPSBBQTtcbiAgQiArPSBCQjtcbiAgQyArPSBDQztcbiAgRCArPSBERDtcbn1cblxuQGdyb3VwKDApIEBiaW5kaW5nKDApXG52YXI8c3RvcmFnZSwgcmVhZF93cml0ZT4gcmVzdWx0OiBhcnJheTx1MzI+O1xuXG5AY29tcHV0ZSBAd29ya2dyb3VwX3NpemUoMSA8PCAke1dPUktHUk9VUF9TSVpFX0JJVFN9KVxuZm4gbWFpbihAYnVpbHRpbihnbG9iYWxfaW52b2NhdGlvbl9pZCkgZ2xvYmFsX2lkIDogdmVjM3UpIHtcbiAgZm9yICh2YXIgaSA9IDB1OyBpIDwgMSA8PCAoMzIgLSAke1dPUktHUk9VUF9DT1VOVF9CSVRTfSAtICR7V09SS0dST1VQX1NJWkVfQklUU30pOyBpKyspIHtcbiAgICBBID0gMHg2NzQ1MjMwMXU7XG4gICAgQiA9IDB4ZWZjZGFiODl1O1xuICAgIEMgPSAweDk4YmFkY2ZldTtcbiAgICBEID0gMHgxMDMyNTQ3NnU7XG5cbiAgICBsZXQgd29yZCA9IChnbG9iYWxfaWQueCA8PCAoMzIgLSAke1dPUktHUk9VUF9DT1VOVF9CSVRTfSAtICR7V09SS0dST1VQX1NJWkVfQklUU30pKSB8IGk7XG4gICAgdXBkYXRlKGFycmF5PHUzMiwgMTY+KFxuICAgICAgd29yZCwgMHg4MHUsIDB1LCAwdSxcbiAgICAgIDB1LCAwdSwgMHUsIDB1LFxuICAgICAgMHUsIDB1LCAwdSwgMHUsXG4gICAgICAwdSwgMHUsIDMydSwgMHUpKTtcbiAgICBpZiAoQSA9PSAweDAwMDAwMDAwdSkge1xuICAgICAgcmVzdWx0W2dsb2JhbF9pZC54XSA9IHdvcmQ7XG4gICAgICAvL2JyZWFrO1xuICAgIH1cbiAgICAvL3Jlc3VsdFtnbG9iYWxfaWQueF0gPSBzZWxlY3QocmVzdWx0W2dsb2JhbF9pZC54XSwgd29yZCwgQSA9PSAweDAwMDAwMDAwdSk7XG4gIH1cbn1cbmA7XG4iXSwibmFtZXMiOlsiQlVGRkVSX1NJWkUiLCJOVU1fUEFSVElDTEVTIiwiV09SS0dST1VQX0NPVU5UIiwicGFnZXMiLCJiYXNpY19yZW5kZXJfcGlwZWxpbmUiLCJjb25zb2xlIiwibG9nIiwiY3ZzIiwiZG9jdW1lbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJjdHgiLCJnZXRDb250ZXh0IiwiYWRhcHRlciIsIm5hdmlnYXRvciIsImdwdSIsInJlcXVlc3RBZGFwdGVyIiwiZGV2aWNlIiwicmVxdWVzdERldmljZSIsInNoYWRlck1vZHVsZSIsImNyZWF0ZVNoYWRlck1vZHVsZSIsImNvZGUiLCJjb25maWd1cmUiLCJmb3JtYXQiLCJnZXRQcmVmZXJyZWRDYW52YXNGb3JtYXQiLCJhbHBoYU1vZGUiLCJ2ZXJ0aWNlcyIsIkZsb2F0MzJBcnJheSIsInZlcnRleEJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsInNpemUiLCJieXRlTGVuZ3RoIiwidXNhZ2UiLCJHUFVCdWZmZXJVc2FnZSIsIlZFUlRFWCIsIkNPUFlfRFNUIiwicXVldWUiLCJ3cml0ZUJ1ZmZlciIsImxlbmd0aCIsInBpcGVsaW5lRGVzY3JpcHRvciIsInZlcnRleCIsIm1vZHVsZSIsImVudHJ5UG9pbnQiLCJidWZmZXJzIiwiYXR0cmlidXRlcyIsInNoYWRlckxvY2F0aW9uIiwib2Zmc2V0IiwiYXJyYXlTdHJpZGUiLCJzdGVwTW9kZSIsImZyYWdtZW50IiwidGFyZ2V0cyIsInByaW1pdGl2ZSIsInRvcG9sb2d5IiwibGF5b3V0IiwicmVuZGVyUGlwZWxpbmUiLCJjcmVhdGVSZW5kZXJQaXBlbGluZSIsImNvbW1hbmRFbmNvZGVyIiwiY3JlYXRlQ29tbWFuZEVuY29kZXIiLCJyZW5kZXJQYXNzRGVzY3JpcHRvciIsImNvbG9yQXR0YWNobWVudHMiLCJjbGVhclZhbHVlIiwiciIsImciLCJiIiwiYSIsImxvYWRPcCIsInN0b3JlT3AiLCJ2aWV3IiwiZ2V0Q3VycmVudFRleHR1cmUiLCJjcmVhdGVWaWV3IiwicGFzc0VuY29kZXIiLCJiZWdpblJlbmRlclBhc3MiLCJzZXRQaXBlbGluZSIsInNldFZlcnRleEJ1ZmZlciIsImRyYXciLCJlbmQiLCJzdWJtaXQiLCJmaW5pc2giLCJiYXNpY19jb21wdXRlX3BpcGVsaW5lIiwib3V0cHV0IiwiU1RPUkFHRSIsIkNPUFlfU1JDIiwic3RhZ2luZ0J1ZmZlciIsIk1BUF9SRUFEIiwiYmluZEdyb3VwTGF5b3V0IiwiY3JlYXRlQmluZEdyb3VwTGF5b3V0IiwiZW50cmllcyIsImJpbmRpbmciLCJ2aXNpYmlsaXR5IiwiR1BVU2hhZGVyU3RhZ2UiLCJDT01QVVRFIiwiYnVmZmVyIiwidHlwZSIsImJpbmRHcm91cCIsImNyZWF0ZUJpbmRHcm91cCIsInJlc291cmNlIiwiY29tcHV0ZVBpcGVsaW5lIiwiY3JlYXRlQ29tcHV0ZVBpcGVsaW5lIiwiY3JlYXRlUGlwZWxpbmVMYXlvdXQiLCJiaW5kR3JvdXBMYXlvdXRzIiwiY29tcHV0ZSIsImJlZ2luQ29tcHV0ZVBhc3MiLCJzZXRCaW5kR3JvdXAiLCJkaXNwYXRjaFdvcmtncm91cHMiLCJNYXRoIiwiY2VpbCIsImNvcHlCdWZmZXJUb0J1ZmZlciIsIm1hcEFzeW5jIiwiR1BVTWFwTW9kZSIsIlJFQUQiLCJkYXRhIiwiZ2V0TWFwcGVkUmFuZ2UiLCJzbGljZSIsInVubWFwIiwiZGVtbzAxIiwiY29sb3JzIiwiY29sb3JCdWZmZXIiLCJkZW1vMDIiLCJjb21wdXRlUGFzcyIsImkiLCJkZW1vMDMiLCJwYXJ0aWNsZXMiLCJwdXNoIiwicmFuZG9tIiwicGFydGljbGVCdWZmZXIiLCJCWVRFU19QRVJfRUxFTUVOVCIsInN0ZXAiLCJyZW5kZXJQYXNzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZGVtbzA0IiwicmVzdWx0QnVmZmVyIiwiY29weUFycmF5QnVmZmVyIiwicmVzdWx0IiwiVWludDhBcnJheSIsImhleCIsImUiLCJ0b1N0cmluZyIsImRlbW8wNSIsInN0YXJ0IiwicGVyZm9ybWFuY2UiLCJub3ciLCJVaW50MzJBcnJheSIsImZvckVhY2giLCJyb3VuZCIsImluZGV4IiwidWwiLCJwYWdlIiwiaHJlZiIsInRleHRDb250ZW50Iiwid2luZG93Iiwib25sb2FkIiwiVVJMIiwibG9jYXRpb24iLCJzZWFyY2hQYXJhbXMiLCJnZXQiXSwic291cmNlUm9vdCI6IiJ9